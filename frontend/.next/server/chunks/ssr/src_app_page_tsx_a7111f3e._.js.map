{"version":3,"sources":["../../../../src/components/AppView.tsx","../../../../src/lib/catalog.ts","../../../../src/app/page.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { useCallback, useEffect, useMemo, useRef, useState } from 'react';\r\nimport { useRouter } from 'next/navigation';\r\nimport {\r\n  addFavorite,\r\n  analyzeListingImage,\r\n  createListing,\r\n  deleteListing,\r\n  fetchCars,\r\n  fetchFavorites,\r\n  fetchDealers,\r\n  fetchMakes,\r\n  fetchMyListings,\r\n  getAnalytics,\r\n  getPriceEstimate,\r\n  handleChatbotMessage,\r\n  handleListingAssistantMessage,\r\n  removeFavorite,\r\n  semanticSearch,\r\n  updateListing,\r\n  uploadListingImage,\r\n} from '@/lib/api';\r\nimport { useAuth } from '@/context/AuthContext';\r\nimport {\r\n  AnalyticsInsights,\r\n  Car,\r\n  CarFilters,\r\n  ChatMessage,\r\n  ChatSession,\r\n  CurrencyCode,\r\n  DealerSummary,\r\n  PriceEstimatePayload,\r\n  VisionAttributes,\r\n} from '@/lib/types';\r\nimport { CHAT_HISTORY_LIMIT, STORAGE_KEYS } from '@/lib/config';\r\nimport { getCatalogEngines, getCatalogMakes, getCatalogModels } from '@/lib/catalog';\r\n\r\nconst NAV_CONFIG = [\r\n  { key: 'listings', labelKey: 'navCatalog', descriptionKey: 'navCatalogDesc' },\r\n  { key: 'favorites', labelKey: 'navFavorites', descriptionKey: 'navFavoritesDesc' },\r\n  { key: 'dealers', labelKey: 'navDealers', descriptionKey: 'navDealersDesc' },\r\n  { key: 'myListings', labelKey: 'navMyListings', descriptionKey: 'navMyListingsDesc' },\r\n  { key: 'addListing', labelKey: 'navAddListing', descriptionKey: 'navAddListingDesc' },\r\n  { key: 'profile', labelKey: 'navProfile', descriptionKey: 'navProfileDesc' },\r\n  { key: 'chatbot', labelKey: 'navChatbot', descriptionKey: 'navChatbotDesc' },\r\n  { key: 'analytics', labelKey: 'navAnalytics', descriptionKey: 'navAnalyticsDesc' },\r\n] as const;\r\n\r\ntype PageKey = (typeof NAV_CONFIG)[number]['key'];\r\n\r\nconst SERVICE_CONFIG = [\r\n  { key: 'marketplace', labelKey: 'serviceMarketplace', descriptionKey: 'serviceMarketplaceDesc', defaultPage: 'listings' as PageKey },\r\n  { key: 'dealer', labelKey: 'serviceDealer', descriptionKey: 'serviceDealerDesc', defaultPage: 'myListings' as PageKey },\r\n  { key: 'insights', labelKey: 'serviceInsights', descriptionKey: 'serviceInsightsDesc', defaultPage: 'chatbot' as PageKey },\r\n] as const;\r\n\r\ntype ServiceMode = (typeof SERVICE_CONFIG)[number]['key'];\r\n\r\nconst SERVICE_NAV_MAP: Record<ServiceMode, PageKey[]> = {\r\n  marketplace: ['listings', 'favorites', 'dealers', 'myListings', 'addListing', 'profile'],\r\n  dealer: ['listings', 'dealers', 'myListings', 'addListing', 'profile', 'analytics'],\r\n  insights: ['chatbot', 'analytics', 'listings', 'favorites', 'profile'],\r\n};\r\n\r\ntype ThemeMode = 'light' | 'dark' | 'system';\r\n\r\nconst THEME_OPTIONS: Array<{ value: ThemeMode; labelKey: 'themeLight' | 'themeDark' | 'themeSystem' }> = [\r\n  { value: 'light', labelKey: 'themeLight' },\r\n  { value: 'dark', labelKey: 'themeDark' },\r\n  { value: 'system', labelKey: 'themeSystem' },\r\n];\r\n\r\nconst TRANSLATIONS = {\r\n  en: {\r\n    tagline: 'Intelligent automotive marketplace',\r\n    statusLabel: 'Status',\r\n    statusGuest: 'Guest',\r\n    statusAuthenticated: 'Authenticated',\r\n    selectorsCurrency: 'Currency',\r\n    selectorsLanguage: 'Language',\r\n    serviceLabel: 'Workspace',\r\n    serviceSubtitle: 'Choose a capability focus',\r\n    serviceCurrent: 'Currently exploring',\r\n    serviceMarketplace: 'Marketplace',\r\n    serviceMarketplaceDesc: 'Live inventory & customers',\r\n    serviceDealer: 'Dealer Hub',\r\n    serviceDealerDesc: 'Manage listings & leads',\r\n    serviceInsights: 'AI Insights',\r\n    serviceInsightsDesc: 'Chat, analytics, vision',\r\n    serviceMenuCta: 'Switch workspace',\r\n    navMenuLabel: 'Browse sections',\r\n    themeLabel: 'Theme',\r\n    themeLight: 'Light',\r\n    themeDark: 'Dark',\r\n    themeSystem: 'System',\r\n    settingsButton: 'Settings',\r\n    settingsTitle: 'Workspace settings',\r\n    settingsSubtitle: 'Personalize your experience',\r\n    settingsProfileCta: 'Manage profile',\r\n    settingsProfileGuest: 'Sign in / Sign up',\r\n    navCatalog: 'Catalog',\r\n    navCatalogDesc: 'Explore the latest inventory',\r\n    navFavorites: 'Favorites',\r\n    navFavoritesDesc: 'Your saved picks',\r\n    navDealers: 'Dealers',\r\n    navDealersDesc: 'Meet verified sellers',\r\n    navMyListings: 'My Listings',\r\n    navMyListingsDesc: 'Manage your cars',\r\n    navAddListing: 'Add Listing',\r\n    navAddListingDesc: 'Create a new listing',\r\n    navProfile: 'Profile & Auth',\r\n    navProfileDesc: 'Account settings',\r\n    navChatbot: 'AI Assistant',\r\n    navChatbotDesc: 'Chat & vision tools',\r\n    navAnalytics: 'Analytics',\r\n    navAnalyticsDesc: 'Market intelligence',\r\n    searchPlaceholder: 'Search make, model, year',\r\n    semanticPlaceholder: 'e.g. Luxury hybrid SUV under 150k',\r\n    dropPrompt: 'Drag & drop or paste an image',\r\n    dropHint: 'JPG, PNG up to 10MB',\r\n    priceAssistLabel: 'AI Price Assist',\r\n    uploadPhotoLabel: 'Upload Photo',\r\n    visionHelperLabel: 'Vision Helper',\r\n    galleryLabel: 'Gallery',\r\n    galleryHint: 'Attach up to 6 showcase shots',\r\n    galleryEmpty: 'No gallery images yet.',\r\n    galleryUploadLabel: 'Upload images',\r\n    galleryAddButton: 'Add',\r\n    galleryRemove: 'Remove',\r\n    videoLabel: 'Video link',\r\n    makeSelectLabel: 'Choose make',\r\n    modelSelectLabel: 'Choose model',\r\n    engineSelectLabel: 'Choose engine',\r\n    odometerLabel: 'Odometer (km)',\r\n    descriptionHeading: 'Description',\r\n    dealersHeading: 'Featured dealer network',\r\n    dealersSubheading: 'Shop curated showrooms powered by IntelliWheels partners.',\r\n    dealersEmpty: 'No dealer partners are live yet.',\r\n    dealersVisit: 'View showroom',\r\n    dealerMetaListings: 'Listings',\r\n    dealerMetaAverage: 'Avg price',\r\n    dealerMetaTopMakes: 'Top makes',\r\n    dealerInventoryTitle: 'Available cars',\r\n    dealerContactCta: 'Contact dealer',\r\n    settingsLabel: 'Settings',\r\n    settingsTheme: 'Theme',\r\n    settingsLanguage: 'Language',\r\n    settingsCurrency: 'Currency',\r\n    footerContact: 'Contact',\r\n    footerSupport: 'Support',\r\n    footerSocial: 'Social',\r\n    footerRights: 'All rights reserved.',\r\n    footerEmail: 'Email us',\r\n    footerPhone: 'Call support',\r\n    footerInstagram: 'Instagram',\r\n  },\r\n  ar: {\r\n    tagline: 'Ù…Ù†ØµØ© Ø³ÙŠØ§Ø±Ø§Øª Ø°ÙƒÙŠØ©',\r\n    statusLabel: 'Ø§Ù„Ø­Ø§Ù„Ø©',\r\n    statusGuest: 'Ø²Ø§Ø¦Ø±',\r\n    statusAuthenticated: 'Ù…Ø³Ø¬Ù„',\r\n    selectorsCurrency: 'Ø§Ù„Ø¹Ù…Ù„Ø©',\r\n    selectorsLanguage: 'Ø§Ù„Ù„ØºØ©',\r\n    serviceLabel: 'Ø¨ÙŠØ¦Ø© Ø§Ù„Ø¹Ù…Ù„',\r\n    serviceSubtitle: 'Ø§Ø®ØªØ± Ù†Ù…Ø· Ø§Ù„Ø®Ø¯Ù…Ø© Ø§Ù„Ø£Ù†Ø³Ø¨',\r\n    serviceCurrent: 'Ø£Ù†Øª Ø§Ù„Ø¢Ù† ÙÙŠ',\r\n    serviceMarketplace: 'Ø§Ù„Ø³ÙˆÙ‚',\r\n    serviceMarketplaceDesc: 'Ø§Ù„Ù…Ø®Ø²ÙˆÙ† Ø§Ù„Ù…Ø¨Ø§Ø´Ø± ÙˆØ§Ù„Ø¹Ù…Ù„Ø§Ø¡',\r\n    serviceDealer: 'Ù…Ø±ÙƒØ² Ø§Ù„ÙˆÙƒÙ„Ø§Ø¡',\r\n    serviceDealerDesc: 'Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø¹Ø±ÙˆØ¶ ÙˆØ§Ù„Ø¹Ù…Ù„Ø§Ø¡ Ø§Ù„Ù…Ø­ØªÙ…Ù„ÙŠÙ†',\r\n    serviceInsights: 'Ø±Ø¤Ù‰ Ø§Ù„Ø°ÙƒØ§Ø¡',\r\n    serviceInsightsDesc: 'Ø§Ù„Ø¯Ø±Ø¯Ø´Ø© ÙˆØ§Ù„ØªØ­Ù„ÙŠÙ„Ø§Øª ÙˆØ§Ù„Ø±Ø¤ÙŠØ©',\r\n    serviceMenuCta: 'ØªØºÙŠÙŠØ± Ù…Ø³Ø§Ø­Ø© Ø§Ù„Ø¹Ù…Ù„',\r\n    navMenuLabel: 'ØªØµÙØ­ Ø§Ù„Ø£Ù‚Ø³Ø§Ù…',\r\n    themeLabel: 'Ø§Ù„ÙˆØ¶Ø¹',\r\n    themeLight: 'ÙØ§ØªØ­',\r\n    themeDark: 'Ø¯Ø§ÙƒÙ†',\r\n    themeSystem: 'Ø­Ø³Ø¨ Ø§Ù„Ù†Ø¸Ø§Ù…',\r\n    settingsButton: 'Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª',\r\n    settingsTitle: 'Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ù…Ø³Ø§Ø­Ø© Ø§Ù„Ø¹Ù…Ù„',\r\n    settingsSubtitle: 'Ø®ØµØµ ØªØ¬Ø±Ø¨ØªÙƒ',\r\n    settingsProfileCta: 'Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø­Ø³Ø§Ø¨',\r\n    settingsProfileGuest: 'ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ / Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨',\r\n    navCatalog: 'Ø§Ù„ÙƒØªØ§Ù„ÙˆØ¬',\r\n    navCatalogDesc: 'Ø§ÙƒØªØ´Ù Ø£Ø­Ø¯Ø« Ø§Ù„Ø³ÙŠØ§Ø±Ø§Øª',\r\n    navFavorites: 'Ø§Ù„Ù…ÙØ¶Ù„Ø©',\r\n    navFavoritesDesc: 'Ø³ÙŠØ§Ø±Ø§ØªÙƒ Ø§Ù„Ù…Ø®ØªØ§Ø±Ø©',\r\n    navDealers: 'Ø§Ù„ÙˆÙƒÙ„Ø§Ø¡',\r\n    navDealersDesc: 'ØªØ¹Ø±Ù Ø¹Ù„Ù‰ Ø´Ø±ÙƒØ§Ø¦Ù†Ø§ Ø§Ù„Ù…Ø¹ØªÙ…Ø¯ÙŠÙ†',\r\n    navMyListings: 'Ø³ÙŠØ§Ø±Ø§ØªÙŠ',\r\n    navMyListingsDesc: 'Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø³ÙŠØ§Ø±Ø§Øª Ø§Ù„Ù…Ø¹Ø±ÙˆØ¶Ø©',\r\n    navAddListing: 'Ø¥Ø¶Ø§ÙØ© Ø³ÙŠØ§Ø±Ø©',\r\n    navAddListingDesc: 'Ø¥Ù†Ø´Ø§Ø¡ Ø¹Ø±Ø¶ Ø¬Ø¯ÙŠØ¯',\r\n    navProfile: 'Ø§Ù„Ù…Ù„Ù Ø§Ù„Ø´Ø®ØµÙŠ',\r\n    navProfileDesc: 'Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø­Ø³Ø§Ø¨',\r\n    navChatbot: 'Ø§Ù„Ù…Ø³Ø§Ø¹Ø¯ Ø§Ù„Ø°ÙƒÙŠ',\r\n    navChatbotDesc: 'Ø¯Ø±Ø¯Ø´Ø© ÙˆØ±Ø¤ÙŠØ© Ø¨Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ',\r\n    navAnalytics: 'Ø§Ù„ØªØ­Ù„ÙŠÙ„Ø§Øª',\r\n    navAnalyticsDesc: 'Ø±Ø¤Ù‰ Ø§Ù„Ø³ÙˆÙ‚',\r\n    searchPlaceholder: 'Ø§Ø¨Ø­Ø« Ø¹Ù† Ø§Ù„Ù…ÙˆØ¯ÙŠÙ„ Ø£Ùˆ Ø§Ù„Ø³Ù†Ø©',\r\n    semanticPlaceholder: 'Ù…Ø«Ø§Ù„: Ø³ÙŠØ§Ø±Ø© Ù‡Ø¬ÙŠÙ†Ø© ÙØ§Ø®Ø±Ø© Ø£Ù‚Ù„ Ù…Ù† 150 Ø£Ù„Ù',\r\n    dropPrompt: 'Ø§Ø³Ø­Ø¨ ÙˆØ£ÙÙ„Øª Ø£Ùˆ Ø§Ù„ØµÙ‚ ØµÙˆØ±Ø© Ù‡Ù†Ø§',\r\n    dropHint: 'ØµÙˆØ± â€JPG, PNGâ€ Ø­ØªÙ‰ 10 Ù…ÙŠØºØ§Ø¨Ø§ÙŠØª',\r\n    priceAssistLabel: 'Ù…Ø³Ø§Ø¹Ø¯ Ø§Ù„ØªØ³Ø¹ÙŠØ± Ø¨Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ',\r\n    uploadPhotoLabel: 'ØªØ­Ù…ÙŠÙ„ ØµÙˆØ±Ø©',\r\n    visionHelperLabel: 'Ù…Ø³Ø§Ø¹Ø¯ Ø§Ù„Ø±Ø¤ÙŠØ©',\r\n    galleryLabel: 'Ù…Ø¹Ø±Ø¶ Ø§Ù„ØµÙˆØ±',\r\n    galleryHint: 'Ø£Ø¶Ù Ø­ØªÙ‰ Ù¦ ØµÙˆØ± Ù…Ù…ÙŠØ²Ø©',\r\n    galleryEmpty: 'Ù„Ø§ ØªÙˆØ¬Ø¯ ØµÙˆØ± Ø¨Ø¹Ø¯.',\r\n    galleryUploadLabel: 'Ø±ÙØ¹ Ø§Ù„ØµÙˆØ±',\r\n    galleryAddButton: 'Ø¥Ø¶Ø§ÙØ©',\r\n    galleryRemove: 'Ø¥Ø²Ø§Ù„Ø©',\r\n    videoLabel: 'Ø±Ø§Ø¨Ø· Ø§Ù„ÙÙŠØ¯ÙŠÙˆ',\r\n    makeSelectLabel: 'Ø§Ø®ØªØ± Ø§Ù„Ø´Ø±ÙƒØ©',\r\n    modelSelectLabel: 'Ø§Ø®ØªØ± Ø§Ù„Ù…ÙˆØ¯ÙŠÙ„',\r\n    engineSelectLabel: 'Ø§Ø®ØªØ± Ø§Ù„Ù…Ø­Ø±Ùƒ',\r\n    odometerLabel: 'Ù‚Ø±Ø§Ø¡Ø© Ø§Ù„Ø¹Ø¯Ø§Ø¯ (ÙƒÙ…)',\r\n    descriptionHeading: 'Ø§Ù„ÙˆØµÙ',\r\n    dealersHeading: 'Ø´Ø¨ÙƒØ© Ø§Ù„ÙˆÙƒÙ„Ø§Ø¡ Ø§Ù„Ù…Ù…ÙŠØ²ÙŠÙ†',\r\n    dealersSubheading: 'Ø§Ø³ØªÙƒØ´Ù ØµØ§Ù„Ø§Øª Ø§Ù„Ø¹Ø±Ø¶ Ø§Ù„Ù…Ø®ØªØ§Ø±Ø© Ù…Ù† Ø´Ø±ÙƒØ§Ø¡ IntelliWheels.',\r\n    dealersEmpty: 'Ù„Ø§ ÙŠÙˆØ¬Ø¯ ÙˆÙƒÙ„Ø§Ø¡ Ù†Ø´Ø·ÙˆÙ† Ø­Ø§Ù„ÙŠØ§Ù‹.',\r\n    dealersVisit: 'Ø¹Ø±Ø¶ Ø§Ù„ØµØ§Ù„Ø©',\r\n    dealerMetaListings: 'Ø§Ù„Ø¹Ø±ÙˆØ¶',\r\n    dealerMetaAverage: 'Ù…ØªÙˆØ³Ø· Ø§Ù„Ø³Ø¹Ø±',\r\n    dealerMetaTopMakes: 'Ø£Ø¨Ø±Ø² Ø§Ù„Ø¹Ù„Ø§Ù…Ø§Øª',\r\n    dealerInventoryTitle: 'Ø§Ù„Ø³ÙŠØ§Ø±Ø§Øª Ø§Ù„Ù…ØªØ§Ø­Ø©',\r\n    dealerContactCta: 'ØªÙˆØ§ØµÙ„ Ù…Ø¹ Ø§Ù„ÙˆÙƒÙŠÙ„',\r\n    settingsLabel: 'Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª',\r\n    settingsTheme: 'Ø§Ù„Ù…Ø¸Ù‡Ø±',\r\n    settingsLanguage: 'Ø§Ù„Ù„ØºØ©',\r\n    settingsCurrency: 'Ø§Ù„Ø¹Ù…Ù„Ø©',\r\n    footerContact: 'ØªÙˆØ§ØµÙ„ Ù…Ø¹Ù†Ø§',\r\n    footerSupport: 'Ø§Ù„Ø¯Ø¹Ù…',\r\n    footerSocial: 'ÙˆØ³Ø§Ø¦Ù„ Ø§Ù„ØªÙˆØ§ØµÙ„',\r\n    footerRights: 'Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ‚ Ù…Ø­ÙÙˆØ¸Ø©.',\r\n    footerEmail: 'Ø±Ø§Ø³Ù„Ù†Ø§',\r\n    footerPhone: 'Ø§ØªØµÙ„ Ø¨Ø§Ù„Ø¯Ø¹Ù…',\r\n    footerInstagram: 'Ø¥Ù†Ø³ØªØºØ±Ø§Ù…',\r\n  },\r\n} as const;\r\n\r\nconst LANGUAGE_OPTIONS = [\r\n  { value: 'en', label: 'English' },\r\n  { value: 'ar', label: 'Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©' },\r\n] as const;\r\n\r\nconst CURRENCY_OPTIONS: CurrencyCode[] = ['AED', 'USD', 'EUR', 'GBP', 'SAR', 'QAR', 'BHD', 'KWD', 'OMR', 'JOD'];\r\n\r\nconst CURRENCY_RATES: Record<CurrencyCode, number> = {\r\n  JOD: 1,\r\n  AED: 0.19,\r\n  USD: 0.71,\r\n  EUR: 0.65,\r\n  GBP: 0.56,\r\n  SAR: 0.19,\r\n  QAR: 0.19,\r\n  BHD: 0.53,\r\n  KWD: 0.43,\r\n  OMR: 2.15,\r\n};\r\n\r\nconst DEFAULT_FILTERS: CarFilters = {\r\n  make: 'all',\r\n  search: '',\r\n  sort: 'default',\r\n};\r\n\r\nconst LISTINGS_PER_PAGE = 9;\r\n\r\ninterface ToastState {\r\n  type: 'success' | 'error' | 'info';\r\n  message: string;\r\n}\r\n\r\ninterface ListingFormState {\r\n  make: string;\r\n  model: string;\r\n  year: string;\r\n  price: string;\r\n  currency: string;\r\n  bodyStyle: string;\r\n  horsepower: string;\r\n  engine: string;\r\n  fuelEconomy: string;\r\n  odometer: string;\r\n  image: string;\r\n  galleryImages: string[];\r\n  videoUrl: string;\r\n  description: string;\r\n}\r\n\r\ninterface VisionSuggestion extends VisionAttributes {\r\n  raw?: string;\r\n}\r\n\r\nexport function AppView() {\r\n  const { user, token, loading: authLoading, login, signup, logout, updateMyProfile, refreshProfile, error: authError, clearError } = useAuth();\r\n  const [activePage, setActivePage] = useState<PageKey>('listings');\r\n  const [serviceMode, setServiceMode] = useState<ServiceMode>('marketplace');\r\n  const [theme, setTheme] = useState<ThemeMode>('light');\r\n  const [filters, setFilters] = useState<CarFilters>(DEFAULT_FILTERS);\r\n  const [cars, setCars] = useState<Car[]>([]);\r\n  const [makes, setMakes] = useState<string[]>([]);\r\n  const [dealers, setDealers] = useState<DealerSummary[]>([]);\r\n  const [dealersLoading, setDealersLoading] = useState(false);\r\n  const [favorites, setFavorites] = useState<number[]>([]);\r\n  const [myListings, setMyListings] = useState<Car[]>([]);\r\n  const [analyticsData, setAnalyticsData] = useState<AnalyticsInsights | null>(null);\r\n  const [analyticsFilter, setAnalyticsFilter] = useState<'all' | 'my' | 'favorites'>('all');\r\n  const [semanticQuery, setSemanticQuery] = useState('');\r\n  const [semanticResults, setSemanticResults] = useState<Car[]>([]);\r\n  const [semanticLoading, setSemanticLoading] = useState(false);\r\n  const [toast, setToast] = useState<ToastState | null>(null);\r\n  const [serviceMenuOpen, setServiceMenuOpen] = useState(false);\r\n  const [navMenuOpen, setNavMenuOpen] = useState(false);\r\n  const [settingsOpen, setSettingsOpen] = useState(false);\r\n  const [isSubmittingListing, setIsSubmittingListing] = useState(false);\r\n  const [listingForm, setListingForm] = useState<ListingFormState>({\r\n    make: '',\r\n    model: '',\r\n    year: '',\r\n    price: '',\r\n    currency: 'AED',\r\n    bodyStyle: '',\r\n    horsepower: '',\r\n    engine: '',\r\n    fuelEconomy: '',\r\n    odometer: '',\r\n    image: '',\r\n    galleryImages: [],\r\n    videoUrl: '',\r\n    description: '',\r\n  });\r\n  const [currency, setCurrency] = useState<CurrencyCode>('JOD');\r\n  const [language, setLanguage] = useState<'en' | 'ar'>('en');\r\n  const [isDraggingImage, setIsDraggingImage] = useState(false);\r\n  const [priceEstimate, setPriceEstimate] = useState<{ value: number; currency: string; range?: { low: number; high: number } } | null>(null);\r\n  const [visionSuggestion, setVisionSuggestion] = useState<VisionSuggestion | null>(null);\r\n  const [visionLoading, setVisionLoading] = useState(false);\r\n  const [assistantMode, setAssistantMode] = useState<'general' | 'listing'>('general');\r\n  const [chatSessions, setChatSessions] = useState<ChatSession[]>([]);\r\n  const [activeSessionId, setActiveSessionId] = useState<string | null>(null);\r\n  const [chatInput, setChatInput] = useState('');\r\n  const [chatBusy, setChatBusy] = useState(false);\r\n  const [chatAttachment, setChatAttachment] = useState<{ preview: string; base64: string; mime: string } | null>(null);\r\n  const [currentPage, setCurrentPage] = useState(1);\r\n  const [pendingGalleryUrl, setPendingGalleryUrl] = useState('');\r\n  const serviceMenuRef = useRef<HTMLDivElement | null>(null);\r\n  const navMenuRef = useRef<HTMLDivElement | null>(null);\r\n  const settingsMenuRef = useRef<HTMLDivElement | null>(null);\r\n  const resolvedTheme = theme === 'system' ? 'light' : theme;\r\n  const currentService = SERVICE_CONFIG.find((service) => service.key === serviceMode) ?? SERVICE_CONFIG[0];\r\n  const router = useRouter();\r\n\r\n  const copy = TRANSLATIONS[language];\r\n  const apiHost = useMemo(() => {\r\n    const base = process.env.NEXT_PUBLIC_API_BASE_URL ?? '';\r\n    return base.replace(/\\/api$/, '');\r\n  }, []);\r\n  const makeOptions = useMemo(() => getCatalogMakes(), []);\r\n  const modelOptions = useMemo(() => (listingForm.make ? getCatalogModels(listingForm.make) : []), [listingForm.make]);\r\n  const engineOptions = useMemo(\r\n    () => (listingForm.make && listingForm.model ? getCatalogEngines(listingForm.make, listingForm.model) : []),\r\n    [listingForm.make, listingForm.model]\r\n  );\r\n  const availableMakeOptions = useMemo(() => {\r\n    if (!listingForm.make || makeOptions.includes(listingForm.make)) {\r\n      return makeOptions;\r\n    }\r\n    return [...makeOptions, listingForm.make];\r\n  }, [listingForm.make, makeOptions]);\r\n  const availableModelOptions = useMemo(() => {\r\n    if (!listingForm.model || modelOptions.includes(listingForm.model)) {\r\n      return modelOptions;\r\n    }\r\n    return [...modelOptions, listingForm.model];\r\n  }, [listingForm.model, modelOptions]);\r\n  const availableEngineOptions = useMemo(() => {\r\n    if (!listingForm.engine || engineOptions.includes(listingForm.engine)) {\r\n      return engineOptions;\r\n    }\r\n    return [...engineOptions, listingForm.engine];\r\n  }, [engineOptions, listingForm.engine]);\r\n  const direction = language === 'ar' ? 'rtl' : 'ltr';\r\n  const backgroundClass = resolvedTheme === 'dark'\r\n    ? 'bg-gradient-to-b from-slate-950 via-slate-900 to-slate-950 text-slate-100'\r\n    : 'bg-gradient-to-br from-slate-50 via-white to-sky-50 text-slate-900';\r\n  const headerSurfaceClass = resolvedTheme === 'dark'\r\n    ? 'bg-[#06122A] text-slate-100'\r\n    : 'bg-gradient-to-r from-sky-900 via-slate-900 to-slate-800 text-white';\r\n  const mainSurfaceClass = resolvedTheme === 'dark'\r\n    ? 'border-slate-800 bg-slate-900/80 text-slate-100'\r\n    : 'border-slate-100 bg-white/90 text-slate-900';\r\n  const headerMuted = resolvedTheme === 'dark' ? 'text-slate-300/80' : 'text-slate-200/80';\r\n  const headerSubtleText = resolvedTheme === 'dark' ? 'text-slate-200/90' : 'text-slate-100/80';\r\n  const selectorClass = resolvedTheme === 'dark'\r\n    ? 'rounded-2xl border border-slate-700 bg-slate-900/60 px-3 py-2 text-sm text-slate-100'\r\n    : 'rounded-2xl border border-slate-200 bg-slate-50 px-3 py-2 text-sm text-slate-900';\r\n  const statusPillClass = token\r\n    ? 'border border-emerald-400/40 bg-emerald-500/10 text-emerald-300'\r\n    : resolvedTheme === 'dark'\r\n      ? 'border border-blue-500/30 bg-blue-900/40 text-blue-200'\r\n      : 'border border-slate-200 bg-white/20 text-white';\r\n  const subtleBorderClass = resolvedTheme === 'dark' ? 'border-blue-900/30' : 'border-sky-900/40';\r\n  const navActiveItemClass = resolvedTheme === 'dark'\r\n    ? 'bg-blue-900/60 text-slate-50'\r\n    : 'bg-slate-100 text-slate-900';\r\n  const navIdleItemClass = resolvedTheme === 'dark'\r\n    ? 'text-slate-200 hover:bg-blue-900/40'\r\n    : 'text-slate-700 hover:bg-slate-100';\r\n  const navItems = useMemo(() => {\r\n    const allowedKeys = new Set(SERVICE_NAV_MAP[serviceMode] ?? NAV_CONFIG.map((item) => item.key));\r\n    return NAV_CONFIG.filter((item) => allowedKeys.has(item.key)).map((item) => ({\r\n      key: item.key,\r\n      label: copy[item.labelKey],\r\n      description: copy[item.descriptionKey],\r\n    }));\r\n  }, [language, serviceMode]);\r\n  const handleOpenCarDetails = useCallback(\r\n    (carId: number) => {\r\n      router.push(`/cars/${carId}`);\r\n    },\r\n    [router]\r\n  );\r\n  const handleOpenDealer = useCallback(\r\n    (dealerId: number) => {\r\n      router.push(`/dealers/${dealerId}`);\r\n    },\r\n    [router]\r\n  );\r\n  const inputFieldClass = 'rounded-2xl border border-slate-200 bg-slate-50 p-3 text-slate-900 placeholder-slate-400 focus:border-sky-500 focus:outline-none';\r\n\r\n  const chatSession = useMemo(() => chatSessions.find((session) => session.id === activeSessionId) ?? null, [chatSessions, activeSessionId]);\r\n  const chatMessages = chatSession?.messages ?? [];\r\n\r\n  useEffect(() => {\r\n    if (typeof window === 'undefined') return;\r\n    const storedService = localStorage.getItem(STORAGE_KEYS.serviceMode) as ServiceMode | null;\r\n    if (storedService && SERVICE_NAV_MAP[storedService]) {\r\n      setServiceMode((prev) => (prev === storedService ? prev : storedService));\r\n    }\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (typeof window === 'undefined') return;\r\n    const storedTheme = localStorage.getItem(STORAGE_KEYS.theme) as ThemeMode | null;\r\n    if (storedTheme) {\r\n      setTheme((prev) => (prev === storedTheme ? prev : storedTheme));\r\n    }\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (typeof window === 'undefined') return;\r\n    const storedSessions = localStorage.getItem(STORAGE_KEYS.chatSessions);\r\n    if (!storedSessions) return;\r\n    try {\r\n      const parsed = JSON.parse(storedSessions);\r\n      if (Array.isArray(parsed)) {\r\n        setChatSessions(parsed);\r\n        setActiveSessionId((prev) => prev ?? parsed[0]?.id ?? null);\r\n      }\r\n    } catch (err) {\r\n      console.warn('Failed to parse chat sessions', err);\r\n    }\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (activeSessionId || !chatSessions.length) return;\r\n    setActiveSessionId(chatSessions[0].id);\r\n  }, [chatSessions, activeSessionId]);\r\n\r\n  useEffect(() => {\r\n    if (typeof window === 'undefined') return;\r\n    localStorage.setItem(STORAGE_KEYS.theme, theme);\r\n  }, [theme]);\r\n\r\n  useEffect(() => {\r\n    if (typeof window === 'undefined') return;\r\n    localStorage.setItem(STORAGE_KEYS.serviceMode, serviceMode);\r\n  }, [serviceMode]);\r\n\r\n  useEffect(() => {\r\n    const allowedPages = SERVICE_NAV_MAP[serviceMode] ?? NAV_CONFIG.map((item) => item.key);\r\n    // Don't force redirect if trying to access pages that might be conditionally allowed or are valid\r\n    if (!allowedPages.includes(activePage) && activePage !== 'addListing') {\r\n      // Check if 'add_listing' is valid for this mode generally, or just allow it if user is logged in\r\n      // For now, let's trust the user selection unless it's completely invalid\r\n      if (activePage !== 'profile') {\r\n        setActivePage(allowedPages[0] ?? 'listings');\r\n      }\r\n    }\r\n  }, [serviceMode, activePage]);\r\n\r\n  useEffect(() => {\r\n    function handleClick(event: MouseEvent) {\r\n      const target = event.target as Node;\r\n      if (serviceMenuOpen && serviceMenuRef.current && !serviceMenuRef.current.contains(target)) {\r\n        setServiceMenuOpen(false);\r\n      }\r\n      if (navMenuOpen && navMenuRef.current && !navMenuRef.current.contains(target)) {\r\n        setNavMenuOpen(false);\r\n      }\r\n      if (settingsOpen && settingsMenuRef.current && !settingsMenuRef.current.contains(target)) {\r\n        setSettingsOpen(false);\r\n      }\r\n    }\r\n    document.addEventListener('mousedown', handleClick);\r\n    return () => document.removeEventListener('mousedown', handleClick);\r\n  }, [serviceMenuOpen, navMenuOpen, settingsOpen]);\r\n\r\n  useEffect(() => {\r\n    function handleKey(event: KeyboardEvent) {\r\n      if (event.key === 'Escape') {\r\n        setServiceMenuOpen(false);\r\n        setNavMenuOpen(false);\r\n        setSettingsOpen(false);\r\n      }\r\n    }\r\n    window.addEventListener('keydown', handleKey);\r\n    return () => window.removeEventListener('keydown', handleKey);\r\n  }, []);\r\n\r\n  const resolveImageUrl = useCallback(\r\n    (src?: string | null) => {\r\n      if (!src) return '/placeholder-car.svg';\r\n      if (src.startsWith('http')) return src;\r\n      if (src.startsWith('data:')) return src;\r\n      if (!apiHost) return src;\r\n      return `${apiHost}${src.startsWith('/') ? src : `/${src}`}`;\r\n    },\r\n    [apiHost]\r\n  );\r\n\r\n  const getCarImage = useCallback(\r\n    (car: Car) => {\r\n      if (car.image) {\r\n        return resolveImageUrl(car.image);\r\n      }\r\n      if (car.galleryImages?.length) {\r\n        return resolveImageUrl(car.galleryImages[0]);\r\n      }\r\n      const mediaPreview = car.mediaGallery?.find((entry) => entry.type === 'image' && entry.url)?.url;\r\n      if (mediaPreview) {\r\n        return resolveImageUrl(mediaPreview);\r\n      }\r\n      if (car.imageUrls?.length) {\r\n        return resolveImageUrl(car.imageUrls[0]);\r\n      }\r\n      return '/placeholder-car.svg';\r\n    },\r\n    [resolveImageUrl]\r\n  );\r\n\r\n  const formatPrice = useCallback(\r\n    (value?: number, sourceCurrency: CurrencyCode = 'AED') => {\r\n      if (value === undefined || value === null) return 'TBD';\r\n      const converted = convertCurrency(value, sourceCurrency, currency);\r\n      return formatCurrency(converted ?? value, currency);\r\n    },\r\n    [currency]\r\n  );\r\n\r\n  const requireAuth = useCallback(() => {\r\n    if (!token) {\r\n      setToast({ type: 'info', message: 'Please sign in to access this feature.' });\r\n      setActivePage('profile');\r\n      return false;\r\n    }\r\n    return true;\r\n  }, [token]);\r\n\r\n  const showToast = useCallback((message: string, type: ToastState['type'] = 'success') => {\r\n    setToast({ message, type });\r\n    setTimeout(() => setToast(null), 4000);\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    const controller = new AbortController();\r\n    async function loadCars() {\r\n      try {\r\n        const response = await fetchCars(filters, controller.signal, token);\r\n        if (response.success) {\r\n          setCars(response.cars || []);\r\n        }\r\n      } catch (err: any) {\r\n        console.error('Failed to load cars', err);\r\n        // Only redirect if explicitly rejected and not already on a vital public page\r\n        if (typeof err?.message === 'string' && err.message.toLowerCase().includes('auth') && activePage !== 'listings' && activePage !== 'dealers') {\r\n          // Don't auto-redirect, just let the user see the restricted content message or handle it locally\r\n        }\r\n      }\r\n    }\r\n    loadCars();\r\n    return () => controller.abort();\r\n  }, [filters, token, requireAuth]);\r\n\r\n  useEffect(() => {\r\n    async function loadMakes() {\r\n      try {\r\n        const response = await fetchMakes(token);\r\n        if (response.success) {\r\n          const deduped = Array.from(new Set(['all', ...(response.makes || [])]));\r\n          setMakes(deduped);\r\n        }\r\n      } catch (err: any) {\r\n        console.warn('Failed to load makes', err);\r\n        if (typeof err?.message === 'string' && err.message.toLowerCase().includes('auth')) {\r\n          requireAuth();\r\n        }\r\n      }\r\n    }\r\n    loadMakes();\r\n  }, [token, requireAuth]);\r\n\r\n  useEffect(() => {\r\n    if (!token) {\r\n      setFavorites([]);\r\n      setMyListings([]);\r\n      return;\r\n    }\r\n\r\n    async function hydrateAuthorizedData() {\r\n      try {\r\n        const [favoritesResponse, listingsResponse] = await Promise.all([\r\n          fetchFavorites(token),\r\n          fetchMyListings(token),\r\n        ]);\r\n        if (favoritesResponse.success) {\r\n          setFavorites((favoritesResponse.cars || []).map((car) => car.id));\r\n        }\r\n        if (listingsResponse.success) {\r\n          setMyListings(listingsResponse.cars || []);\r\n        }\r\n      } catch (err) {\r\n        console.warn('Failed to load protected data', err);\r\n      }\r\n    }\r\n    hydrateAuthorizedData();\r\n  }, [token]);\r\n\r\n  useEffect(() => {\r\n    if (!token) {\r\n      setAnalyticsData(null);\r\n      return;\r\n    }\r\n    async function loadAnalytics() {\r\n      try {\r\n        const response = await getAnalytics(analyticsFilter, token);\r\n        if (response.success) {\r\n          setAnalyticsData(response.insights);\r\n        }\r\n      } catch (err) {\r\n        console.warn('Failed to load analytics', err);\r\n      }\r\n    }\r\n    loadAnalytics();\r\n  }, [token, analyticsFilter]);\r\n\r\n  useEffect(() => {\r\n    if (!token) {\r\n      setDealers([]);\r\n      setDealersLoading(false);\r\n      return;\r\n    }\r\n    let cancelled = false;\r\n    async function loadDealerDirectory() {\r\n      setDealersLoading(true);\r\n      try {\r\n        const response = await fetchDealers(token);\r\n        if (!cancelled && response.success) {\r\n          setDealers(response.dealers || []);\r\n        }\r\n      } catch (err) {\r\n        if (!cancelled) {\r\n          console.warn('Failed to load dealers', err);\r\n        }\r\n      } finally {\r\n        if (!cancelled) {\r\n          setDealersLoading(false);\r\n        }\r\n      }\r\n    }\r\n    loadDealerDirectory();\r\n    return () => {\r\n      cancelled = true;\r\n    };\r\n  }, [token]);\r\n\r\n  useEffect(() => {\r\n    if (typeof window === 'undefined') return;\r\n    localStorage.setItem(STORAGE_KEYS.chatSessions, JSON.stringify(chatSessions));\r\n  }, [chatSessions]);\r\n\r\n  const persistChatSession = useCallback((sessionId: string, messages: ChatMessage[]) => {\r\n    setChatSessions((prev) =>\r\n      prev\r\n        .map((session) =>\r\n          session.id === sessionId\r\n            ? {\r\n              ...session,\r\n              messages: messages.slice(-CHAT_HISTORY_LIMIT),\r\n              updatedAt: new Date().toISOString(),\r\n              title:\r\n                session.title === 'New Chat' && messages.length\r\n                  ? messages.find((msg) => msg.role === 'user')?.text.slice(0, 60) || 'Chat'\r\n                  : session.title,\r\n            }\r\n            : session\r\n        )\r\n        .sort((a, b) => (a.updatedAt < b.updatedAt ? 1 : -1))\r\n    );\r\n  }, []);\r\n\r\n  const startNewChat = useCallback(() => {\r\n    const newSession: ChatSession = {\r\n      id: `session-${Date.now()}`,\r\n      title: 'New Chat',\r\n      messages: [],\r\n      updatedAt: new Date().toISOString(),\r\n    };\r\n    setChatSessions((prev) => [newSession, ...prev]);\r\n    setActiveSessionId(newSession.id);\r\n    return newSession.id;\r\n  }, []);\r\n\r\n  const ensureSession = useCallback(() => {\r\n    if (activeSessionId) return activeSessionId;\r\n    return startNewChat();\r\n  }, [activeSessionId, startNewChat]);\r\n\r\n  const toggleFavorite = useCallback(\r\n    async (car: Car) => {\r\n      if (!requireAuth()) return;\r\n      const isFavorited = favorites.includes(car.id);\r\n      setFavorites((prev) =>\r\n        isFavorited ? prev.filter((id) => id !== car.id) : [...prev, car.id]\r\n      );\r\n      try {\r\n        if (isFavorited) {\r\n          await removeFavorite(car.id, token);\r\n          showToast('Removed from favorites', 'info');\r\n        } else {\r\n          await addFavorite(car.id, token);\r\n          showToast('Added to favorites');\r\n        }\r\n      } catch (err) {\r\n        showToast('Unable to update favorites', 'error');\r\n        setFavorites((prev) =>\r\n          isFavorited ? [...prev, car.id] : prev.filter((id) => id !== car.id)\r\n        );\r\n      }\r\n    },\r\n    [favorites, requireAuth, token, showToast]\r\n  );\r\n\r\n  const handleListingInput = (field: keyof ListingFormState, value: string) => {\r\n    setListingForm((prev) => ({ ...prev, [field]: value }));\r\n  };\r\n\r\n  const handleMakeSelect = (value: string) => {\r\n    setListingForm((prev) => ({\r\n      ...prev,\r\n      make: value,\r\n      model: '',\r\n      engine: '',\r\n    }));\r\n  };\r\n\r\n  const handleModelSelect = (value: string) => {\r\n    setListingForm((prev) => ({\r\n      ...prev,\r\n      model: value,\r\n      engine: '',\r\n    }));\r\n  };\r\n\r\n  const hydrateFromVision = (attributes: VisionSuggestion) => {\r\n    setListingForm((prev) => ({\r\n      ...prev,\r\n      make: attributes.make || prev.make,\r\n      model: attributes.model || prev.model,\r\n      year: attributes.year ? String(attributes.year) : prev.year,\r\n      bodyStyle: attributes.bodyStyle || prev.bodyStyle,\r\n      price: attributes.estimatedPrice ? String(attributes.estimatedPrice) : prev.price,\r\n      description: attributes.conditionDescription || prev.description,\r\n    }));\r\n  };\r\n\r\n  const handleVisionAnalyze = async (file: File) => {\r\n    if (!requireAuth()) return;\r\n    setVisionLoading(true);\r\n    try {\r\n      const base64 = await fileToDataUrl(file);\r\n      const response = await analyzeListingImage({ image_base64: base64, mime_type: file.type }, token);\r\n      if (response.success) {\r\n        setVisionSuggestion({ ...response.attributes, raw: response.raw });\r\n        hydrateFromVision(response.attributes);\r\n        showToast('Vision helper filled the form');\r\n      } else {\r\n        const errorMessage = (response as { error?: string }).error;\r\n        showToast(errorMessage || 'Vision helper failed', 'error');\r\n      }\r\n    } catch (err: any) {\r\n      showToast(err.message || 'Vision helper failed', 'error');\r\n    } finally {\r\n      setVisionLoading(false);\r\n    }\r\n  };\r\n\r\n  const uploadImageAsset = useCallback(\r\n    async (file: File) => {\r\n      const response = await uploadListingImage(file, token);\r\n      if (response.success && response.url) {\r\n        return response.url;\r\n      }\r\n      const errorMessage = (response as { error?: string }).error;\r\n      throw new Error(errorMessage || 'Upload failed');\r\n    },\r\n    [token]\r\n  );\r\n\r\n  const handleUploadImage = async (file: File) => {\r\n    if (!requireAuth()) return;\r\n    try {\r\n      const url = await uploadImageAsset(file);\r\n      handleListingInput('image', url);\r\n      showToast('Image uploaded');\r\n    } catch (err: any) {\r\n      showToast(err.message || 'Upload failed', 'error');\r\n    }\r\n  };\r\n\r\n  const handleGalleryUpload = async (fileList: FileList | null) => {\r\n    if (!requireAuth() || !fileList || fileList.length === 0) return;\r\n    try {\r\n      const uploads = Array.from(fileList).slice(0, 6);\r\n      const uploadedUrls: string[] = [];\r\n      for (const file of uploads) {\r\n        // eslint-disable-next-line no-await-in-loop\r\n        const url = await uploadImageAsset(file);\r\n        uploadedUrls.push(url);\r\n      }\r\n      if (!uploadedUrls.length) return;\r\n      setListingForm((prev) => {\r\n        const combined = [...prev.galleryImages, ...uploadedUrls];\r\n        const primaryImage = prev.image || combined[0] || '';\r\n        return { ...prev, galleryImages: combined, image: primaryImage };\r\n      });\r\n      showToast('Gallery updated');\r\n    } catch (err: any) {\r\n      showToast(err.message || 'Gallery upload failed', 'error');\r\n    }\r\n  };\r\n\r\n  const handleAddGalleryUrl = () => {\r\n    const trimmed = pendingGalleryUrl.trim();\r\n    if (!trimmed) return;\r\n    setListingForm((prev) => {\r\n      if (prev.galleryImages.includes(trimmed)) {\r\n        return prev;\r\n      }\r\n      const gallery = [...prev.galleryImages, trimmed];\r\n      return {\r\n        ...prev,\r\n        galleryImages: gallery,\r\n        image: prev.image || gallery[0] || '',\r\n      };\r\n    });\r\n    setPendingGalleryUrl('');\r\n  };\r\n\r\n  const handleRemoveGalleryImage = (index: number) => {\r\n    setListingForm((prev) => {\r\n      const target = prev.galleryImages[index];\r\n      const nextGallery = prev.galleryImages.filter((_, idx) => idx !== index);\r\n      let nextImage = prev.image;\r\n      if (nextImage === target) {\r\n        nextImage = nextGallery[0] || '';\r\n      }\r\n      return { ...prev, galleryImages: nextGallery, image: nextImage };\r\n    });\r\n  };\r\n\r\n  const handlePriceAssist = async () => {\r\n    if (!requireAuth()) return;\r\n    if (!listingForm.make || !listingForm.model || !listingForm.year) {\r\n      showToast('Add make, model, and year first', 'info');\r\n      return;\r\n    }\r\n    const payload: PriceEstimatePayload = {\r\n      make: listingForm.make,\r\n      model: listingForm.model,\r\n      year: Number(listingForm.year),\r\n      bodyStyle: listingForm.bodyStyle || undefined,\r\n      horsepower: listingForm.horsepower ? Number(listingForm.horsepower) : undefined,\r\n      currency: listingForm.currency as any,\r\n    };\r\n    try {\r\n      const response = await getPriceEstimate(payload, token);\r\n      if (response.success) {\r\n        setPriceEstimate({\r\n          value: Math.round(response.estimate),\r\n          currency: response.currency,\r\n          range: response.range,\r\n        });\r\n        handleListingInput('price', String(Math.round(response.estimate)));\r\n      } else {\r\n        const errorMessage = (response as { error?: string }).error;\r\n        showToast(errorMessage || 'Unable to generate estimate', 'error');\r\n      }\r\n    } catch (err: any) {\r\n      showToast(err.message || 'Unable to generate estimate', 'error');\r\n    }\r\n  };\r\n\r\n  const handleListingSubmit = async (event: React.FormEvent) => {\r\n    event.preventDefault();\r\n    if (!requireAuth()) return;\r\n    setIsSubmittingListing(true);\r\n    try {\r\n      const cleanedGallery = listingForm.galleryImages.filter((url) => Boolean(url?.trim()));\r\n      const normalizedGallery = cleanedGallery.length ? cleanedGallery : listingForm.image ? [listingForm.image] : [];\r\n      const normalizedVideo = listingForm.videoUrl.trim();\r\n      const mediaGalleryPayload = [\r\n        ...normalizedGallery.map((url) => ({ type: 'image' as const, url })),\r\n        ...(normalizedVideo ? [{ type: 'video' as const, url: normalizedVideo }] : []),\r\n      ];\r\n      const payload: Partial<Car> = {\r\n        make: listingForm.make,\r\n        model: listingForm.model,\r\n        year: listingForm.year ? Number(listingForm.year) : undefined,\r\n        price: listingForm.price ? Number(listingForm.price) : undefined,\r\n        currency: listingForm.currency,\r\n        odometerKm: listingForm.odometer ? Number(listingForm.odometer) : undefined,\r\n        image: listingForm.image || normalizedGallery[0],\r\n        galleryImages: normalizedGallery,\r\n        mediaGallery: mediaGalleryPayload,\r\n        videoUrl: normalizedVideo || undefined,\r\n        description: listingForm.description,\r\n        specs: {\r\n          bodyStyle: listingForm.bodyStyle,\r\n          horsepower: listingForm.horsepower ? Number(listingForm.horsepower) : undefined,\r\n          engine: listingForm.engine,\r\n          fuelEconomy: listingForm.fuelEconomy,\r\n        },\r\n      };\r\n      const response = await createListing(payload, token);\r\n      if (response.success) {\r\n        showToast('Listing created successfully');\r\n        setListingForm({\r\n          make: '',\r\n          model: '',\r\n          year: '',\r\n          price: '',\r\n          currency: listingForm.currency,\r\n          bodyStyle: '',\r\n          horsepower: '',\r\n          engine: '',\r\n          fuelEconomy: '',\r\n          odometer: '',\r\n          image: '',\r\n          galleryImages: [],\r\n          videoUrl: '',\r\n          description: '',\r\n        });\r\n        setPendingGalleryUrl('');\r\n        setPriceEstimate(null);\r\n        setVisionSuggestion(null);\r\n        const refresh = await fetchMyListings(token);\r\n        if (refresh.success) setMyListings(refresh.cars || []);\r\n      } else {\r\n        showToast(response.error || 'Could not create listing', 'error');\r\n      }\r\n    } catch (err: any) {\r\n      showToast(err.message || 'Could not create listing', 'error');\r\n    } finally {\r\n      setIsSubmittingListing(false);\r\n    }\r\n  };\r\n\r\n  const handleDeleteListing = async (carId: number) => {\r\n    if (!requireAuth()) return;\r\n    try {\r\n      await deleteListing(carId, token);\r\n      setMyListings((prev) => prev.filter((car) => car.id !== carId));\r\n      showToast('Listing removed', 'info');\r\n    } catch (err: any) {\r\n      showToast(err.message || 'Unable to delete listing', 'error');\r\n    }\r\n  };\r\n\r\n  const handleSemanticSearch = async (event: React.FormEvent) => {\r\n    event.preventDefault();\r\n    if (!requireAuth()) return;\r\n    if (!semanticQuery.trim()) {\r\n      setSemanticResults([]);\r\n      return;\r\n    }\r\n    setSemanticLoading(true);\r\n    try {\r\n      const response = await semanticSearch(semanticQuery.trim(), 6, token);\r\n      if (response.success) {\r\n        setSemanticResults(response.results?.map((entry) => entry.car) || []);\r\n      }\r\n    } catch (err) {\r\n      showToast('Semantic search failed', 'error');\r\n    } finally {\r\n      setSemanticLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleChatSubmit = async () => {\r\n    if (!requireAuth()) return;\r\n    const message = chatInput.trim();\r\n    if (!message && !chatAttachment) return;\r\n    let sessionId = ensureSession();\r\n    if (!sessionId) {\r\n      sessionId = startNewChat();\r\n    }\r\n    const timestamp = new Date().toISOString();\r\n    const userMessage: ChatMessage = {\r\n      id: `user-${timestamp}`,\r\n      role: 'user',\r\n      text: message || '[Attachment] Please analyze the uploaded image.',\r\n      timestamp,\r\n      attachmentUrl: chatAttachment?.preview,\r\n    };\r\n    const updatedMessages = [...chatMessages, userMessage].slice(-CHAT_HISTORY_LIMIT);\r\n    persistChatSession(sessionId, updatedMessages);\r\n    setChatInput('');\r\n    setChatAttachment(null);\r\n    setChatBusy(true);\r\n\r\n    try {\r\n      const historyPayload: Array<{ role: 'user' | 'bot'; text: string }> = updatedMessages\r\n        .filter((msg) => msg.role === 'user' || msg.role === 'assistant')\r\n        .map((msg) => ({ role: msg.role === 'user' ? 'user' : 'bot', text: msg.text }));\r\n\r\n      const response =\r\n        assistantMode === 'listing'\r\n          ? await handleListingAssistantMessage({ query: message, history: historyPayload }, token)\r\n          : await handleChatbotMessage(\r\n            {\r\n              query: message,\r\n              history: historyPayload,\r\n              imageBase64: chatAttachment?.base64,\r\n              imageMimeType: chatAttachment?.mime,\r\n            },\r\n            token\r\n          );\r\n\r\n      const assistantMessage: ChatMessage = {\r\n        id: `assistant-${Date.now()}`,\r\n        role: 'assistant',\r\n        text: response.response,\r\n        timestamp: new Date().toISOString(),\r\n        relevantCarIds: (response as any).relevant_car_ids || [],\r\n        listingData: (response as any).listing_data || null,\r\n        actionType: (response as any).action_type || null,\r\n      };\r\n\r\n      persistChatSession(sessionId, [...updatedMessages, assistantMessage]);\r\n    } catch (err: any) {\r\n      showToast(err.message || 'Assistant failed to respond', 'error');\r\n    } finally {\r\n      setChatBusy(false);\r\n    }\r\n  };\r\n\r\n  const renderToast = () => {\r\n    if (!toast) return null;\r\n    const base = toast.type === 'error' ? 'bg-red-500/90' : toast.type === 'info' ? 'bg-blue-500/90' : 'bg-emerald-500/90';\r\n    return (\r\n      <div className={`fixed top-6 right-6 z-50 rounded-xl px-4 py-3 text-white shadow-xl ${base}`}>\r\n        {toast.message}\r\n      </div>\r\n    );\r\n  };\r\n\r\n  const filteredCars = useMemo(() => {\r\n    return cars.filter((car) => {\r\n      if (filters.make !== 'all' && car.make !== filters.make) return false;\r\n      if (filters.search) {\r\n        const haystack = `${car.make} ${car.model} ${car.year}`.toLowerCase();\r\n        if (!haystack.includes(filters.search.toLowerCase())) return false;\r\n      }\r\n      return true;\r\n    });\r\n  }, [cars, filters]);\r\n\r\n  const sortedCars = useMemo(() => {\r\n    const clone = [...filteredCars];\r\n    switch (filters.sort) {\r\n      case 'price-asc':\r\n        return clone.sort((a, b) => (a.price || 0) - (b.price || 0));\r\n      case 'price-desc':\r\n        return clone.sort((a, b) => (b.price || 0) - (a.price || 0));\r\n      case 'rating-desc':\r\n        return clone.sort((a, b) => (b.rating || 0) - (a.rating || 0));\r\n      case 'year-desc':\r\n        return clone.sort((a, b) => (b.year || 0) - (a.year || 0));\r\n      default:\r\n        return clone;\r\n    }\r\n  }, [filteredCars, filters.sort]);\r\n\r\n  const totalPages = useMemo(() => Math.max(1, Math.ceil(sortedCars.length / LISTINGS_PER_PAGE)), [sortedCars.length]);\r\n\r\n  useEffect(() => {\r\n    setCurrentPage(1);\r\n  }, [filters.make, filters.search, filters.sort]);\r\n\r\n  useEffect(() => {\r\n    if (currentPage > totalPages) {\r\n      setCurrentPage(totalPages);\r\n    }\r\n  }, [currentPage, totalPages]);\r\n\r\n  const paginatedCars = useMemo(() => {\r\n    const start = (currentPage - 1) * LISTINGS_PER_PAGE;\r\n    return sortedCars.slice(start, start + LISTINGS_PER_PAGE);\r\n  }, [currentPage, sortedCars]);\r\n\r\n  const paginationWindow = useMemo(() => {\r\n    if (totalPages <= 5) {\r\n      return Array.from({ length: totalPages }, (_, index) => index + 1);\r\n    }\r\n    let start = Math.max(1, currentPage - 2);\r\n    let end = Math.min(totalPages, start + 4);\r\n    start = Math.max(1, end - 4);\r\n    return Array.from({ length: end - start + 1 }, (_, index) => start + index);\r\n  }, [currentPage, totalPages]);\r\n\r\n  const goToPage = useCallback(\r\n    (page: number) => {\r\n      const safePage = Math.min(Math.max(page, 1), totalPages);\r\n      setCurrentPage(safePage);\r\n      if (typeof window !== 'undefined') {\r\n        window.scrollTo({ top: 0, behavior: 'smooth' });\r\n      }\r\n    },\r\n    [totalPages]\r\n  );\r\n\r\n  const renderCarCard = (car: Car) => (\r\n    <div\r\n      key={car.id}\r\n      className=\"flex flex-col rounded-3xl border border-slate-100 bg-white/90 p-4 shadow-lg transition hover:-translate-y-1 hover:shadow-xl\"\r\n    >\r\n      <div className=\"relative overflow-hidden rounded-2xl bg-slate-100\">\r\n        <img\r\n          src={getCarImage(car)}\r\n          alt={`${car.make} ${car.model}`}\r\n          loading=\"lazy\"\r\n          onError={(event) => {\r\n            const img = event.currentTarget;\r\n            if (img.src.includes('placeholder-car.svg')) return;\r\n            img.src = '/placeholder-car.svg';\r\n          }}\r\n          className=\"h-48 w-full object-cover\"\r\n        />\r\n        <button\r\n          onClick={() => toggleFavorite(car)}\r\n          className={`absolute right-3 top-3 rounded-full px-3 py-1 text-xs font-semibold ${favorites.includes(car.id) ? 'bg-rose-500 text-white' : 'bg-white/90 text-slate-900'\r\n            }`}\r\n        >\r\n          {favorites.includes(car.id) ? 'Favorited' : 'Favorite'}\r\n        </button>\r\n      </div>\r\n      <div className=\"mt-4 flex items-start justify-between gap-3\">\r\n        <div>\r\n          <h3 className=\"text-lg font-semibold text-slate-900\">{car.make} {car.model}</h3>\r\n          <p className=\"text-sm text-slate-500\">{car.year || 'Year TBD'}</p>\r\n        </div>\r\n        <div className=\"text-right text-2xl font-bold text-emerald-600\">\r\n          {formatPrice(car.price, car.currency)}\r\n        </div>\r\n      </div>\r\n      {car.specs?.bodyStyle && (\r\n        <p className=\"text-sm text-slate-600\">{car.specs.bodyStyle}</p>\r\n      )}\r\n      <div className=\"mt-4 flex flex-wrap gap-2 text-xs text-slate-500\">\r\n        {car.rating ? <span>â­ {car.rating.toFixed(1)}</span> : null}\r\n        {car.reviews ? <span>{car.reviews} reviews</span> : null}\r\n        {car.galleryImages?.length ? <span>{car.galleryImages.length} photos</span> : null}\r\n        {car.videoUrl ? <span>ğŸ¥ Video</span> : null}\r\n        {car.odometerKm ? <span>{car.odometerKm.toLocaleString()} km</span> : null}\r\n      </div>\r\n      {car.description && (\r\n        <p className=\"mt-3 line-clamp-3 text-sm text-slate-600\">{car.description}</p>\r\n      )}\r\n      <button\r\n        className=\"mt-4 w-full rounded-xl bg-sky-600 py-2 text-sm font-semibold text-white hover:bg-sky-700\"\r\n        onClick={() => handleOpenCarDetails(car.id)}\r\n      >\r\n        View Details\r\n      </button>\r\n    </div>\r\n  );\r\n\r\n  const renderDealerCard = (dealer: DealerSummary) => (\r\n    <div key={dealer.id} className=\"flex flex-col rounded-3xl border border-slate-100 bg-white/90 p-4 shadow hover:shadow-lg\">\r\n      <div className=\"h-40 overflow-hidden rounded-2xl bg-slate-100\">\r\n        <img\r\n          src={dealer.hero_image || '/placeholder-car.svg'}\r\n          alt={dealer.name}\r\n          className=\"h-full w-full object-cover\"\r\n        />\r\n      </div>\r\n      <div className=\"mt-4 flex items-start justify-between gap-3\">\r\n        <div>\r\n          <h3 className=\"text-lg font-semibold text-slate-900\">{dealer.name}</h3>\r\n          <p className=\"text-sm text-slate-500\">{dealer.total_listings} {copy.dealerMetaListings}</p>\r\n        </div>\r\n        <div className=\"text-right text-sm text-slate-500\">\r\n          <p>{copy.dealerMetaAverage}</p>\r\n          <p className=\"text-base font-semibold text-emerald-600\">\r\n            {dealer.average_price ? formatPrice(dealer.average_price, 'AED') : 'â€”'}\r\n          </p>\r\n        </div>\r\n      </div>\r\n      {dealer.top_makes?.length ? (\r\n        <div className=\"mt-3 text-xs text-slate-500\">\r\n          <p className=\"font-semibold text-slate-700\">{copy.dealerMetaTopMakes}</p>\r\n          <p>{dealer.top_makes.map((entry) => entry.make).slice(0, 3).join(', ')}</p>\r\n        </div>\r\n      ) : null}\r\n      <button\r\n        className=\"mt-4 w-full rounded-xl bg-slate-900/90 py-2 text-sm font-semibold text-white\"\r\n        onClick={() => handleOpenDealer(dealer.id)}\r\n      >\r\n        {copy.dealersVisit}\r\n      </button>\r\n    </div>\r\n  );\r\n\r\n\r\n  const renderAuthPanel = () => (\r\n    <div className=\"grid gap-6 md:grid-cols-2\">\r\n      <div className=\"rounded-3xl border border-slate-100 bg-white p-6 shadow-sm\">\r\n        <h3 className=\"text-xl font-semibold text-slate-900\">Sign In</h3>\r\n        {authError && (\r\n          <p className=\"mt-3 rounded-2xl bg-rose-50 px-4 py-2 text-sm font-semibold text-rose-600\">{authError}</p>\r\n        )}\r\n        <form\r\n          className=\"mt-4 space-y-4\"\r\n          onSubmit={async (event: React.FormEvent<HTMLFormElement>) => {\r\n            event.preventDefault();\r\n            const formData = new FormData(event.currentTarget);\r\n            const username = String(formData.get('login-username'));\r\n            const password = String(formData.get('login-password'));\r\n            clearError();\r\n            const success = await login(username, password);\r\n            if (success) {\r\n              showToast(`Welcome back, ${username}!`);\r\n            } else {\r\n              showToast('Unable to sign in. Please check your details.', 'error');\r\n            }\r\n          }}\r\n        >\r\n          <input name=\"login-username\" placeholder=\"Username\" className={`w-full ${inputFieldClass}`} required />\r\n          <input name=\"login-password\" type=\"password\" placeholder=\"Password\" className={`w-full ${inputFieldClass}`} required />\r\n          <button className=\"w-full rounded-2xl bg-sky-600 py-3 font-semibold text-white\">Sign In</button>\r\n        </form>\r\n      </div>\r\n      <div className=\"rounded-3xl border border-slate-100 bg-white p-6 shadow-sm\">\r\n        <h3 className=\"text-xl font-semibold text-slate-900\">Create Account</h3>\r\n        <form\r\n          className=\"mt-4 space-y-4\"\r\n          onSubmit={async (event: React.FormEvent<HTMLFormElement>) => {\r\n            event.preventDefault();\r\n            const formElement = event.currentTarget;\r\n            const formData = new FormData(formElement);\r\n            const username = String(formData.get('signup-username'));\r\n            const email = String(formData.get('signup-email'));\r\n            const password = String(formData.get('signup-password'));\r\n            clearError();\r\n            const success = await signup(username, email, password);\r\n            if (success) {\r\n              showToast('Account created! You are now signed in.');\r\n              formElement.reset();\r\n            } else {\r\n              showToast('Unable to sign up. Please try again.', 'error');\r\n            }\r\n          }}\r\n        >\r\n          <input name=\"signup-username\" placeholder=\"Username\" className={`w-full ${inputFieldClass}`} required />\r\n          <input name=\"signup-email\" type=\"email\" placeholder=\"Email\" className={`w-full ${inputFieldClass}`} required />\r\n          <input name=\"signup-password\" type=\"password\" placeholder=\"Password\" className={`w-full ${inputFieldClass}`} required />\r\n          <button className=\"w-full rounded-2xl bg-emerald-500 py-3 font-semibold text-white\">Sign Up</button>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  );\r\n\r\n  const renderProfilePanel = () => {\r\n    if (!user) {\r\n      return (\r\n        <div className=\"space-y-6\">\r\n          <p className=\"text-slate-600\">Sign in to manage your account and unlock favorites, listings, and analytics.</p>\r\n          {renderAuthPanel()}\r\n        </div>\r\n      );\r\n    }\r\n    return (\r\n      <div className=\"grid gap-6 md:grid-cols-2\">\r\n        <div className=\"rounded-3xl border border-slate-100 bg-white p-6 shadow-sm\">\r\n          <h3 className=\"text-xl font-semibold text-slate-900\">Profile</h3>\r\n          <p className=\"text-slate-600\">Username: {user.username}</p>\r\n          <p className=\"text-slate-600\">Email: {user.email}</p>\r\n          <button className=\"mt-4 rounded-2xl border border-slate-200 px-4 py-2 text-sm font-semibold text-slate-900\" onClick={() => refreshProfile()}>\r\n            Refresh Profile\r\n          </button>\r\n        </div>\r\n        <div className=\"rounded-3xl border border-slate-100 bg-white p-6 shadow-sm\">\r\n          <h3 className=\"text-xl font-semibold text-slate-900\">Update Profile</h3>\r\n          <form\r\n            className=\"mt-4 space-y-3\"\r\n            onSubmit={async (event: React.FormEvent<HTMLFormElement>) => {\r\n              event.preventDefault();\r\n              const formElement = event.currentTarget;\r\n              const formData = new FormData(formElement);\r\n              const username = formData.get('profile-username')?.toString();\r\n              const email = formData.get('profile-email')?.toString();\r\n              const current_password = formData.get('profile-current-password')?.toString();\r\n              const password = formData.get('profile-password')?.toString();\r\n              const result = await updateMyProfile({ username, email, current_password, password });\r\n              if (result) {\r\n                showToast('Profile updated');\r\n                formElement.reset();\r\n              }\r\n            }}\r\n          >\r\n            <input name=\"profile-username\" placeholder=\"Username\" defaultValue={user.username} className={`w-full ${inputFieldClass}`} />\r\n            <input name=\"profile-email\" type=\"email\" placeholder=\"Email\" defaultValue={user.email} className={`w-full ${inputFieldClass}`} />\r\n            <input name=\"profile-current-password\" type=\"password\" placeholder=\"Current password\" className={`w-full ${inputFieldClass}`} />\r\n            <input name=\"profile-password\" type=\"password\" placeholder=\"New password\" className={`w-full ${inputFieldClass}`} />\r\n            <button className=\"w-full rounded-2xl bg-emerald-500 py-3 font-semibold text-white\">Save Changes</button>\r\n          </form>\r\n          <button className=\"mt-4 w-full rounded-2xl border border-slate-200 py-2 font-semibold text-slate-900\" onClick={() => logout()}>\r\n            Sign Out\r\n          </button>\r\n        </div>\r\n      </div>\r\n    );\r\n  };\r\n\r\n  const renderChatbot = () => (\r\n    <div className=\"grid gap-6 lg:grid-cols-[280px,1fr]\">\r\n      <div className=\"rounded-3xl border border-slate-100 bg-white p-4 shadow-sm\">\r\n        <button className=\"w-full rounded-2xl bg-slate-900/5 px-3 py-2 text-sm font-semibold text-slate-900\" onClick={() => startNewChat()}>\r\n          + New Chat\r\n        </button>\r\n        <div className=\"mt-4 space-y-2\">\r\n          {chatSessions.map((session) => (\r\n            <button\r\n              key={session.id}\r\n              onClick={() => setActiveSessionId(session.id)}\r\n              className={`w-full rounded-2xl px-3 py-2 text-left text-sm ${session.id === activeSessionId ? 'bg-sky-50 text-slate-900' : 'bg-slate-50 text-slate-500'\r\n                }`}\r\n            >\r\n              <span className=\"block font-semibold\">{session.title}</span>\r\n              <span className=\"text-xs\">{new Date(session.updatedAt).toLocaleString()}</span>\r\n            </button>\r\n          ))}\r\n        </div>\r\n        <div className=\"mt-6 space-y-3\">\r\n          <label className=\"text-xs uppercase text-slate-500\">Assistant Mode</label>\r\n          <select\r\n            name=\"assistant-mode\"\r\n            id=\"assistant-mode\"\r\n            value={assistantMode}\r\n            onChange={(event) => setAssistantMode(event.target.value as 'general' | 'listing')}\r\n            className={`w-full ${inputFieldClass}`}\r\n          >\r\n            <option value=\"general\">General Q&A</option>\r\n            <option value=\"listing\">Listing Assistant</option>\r\n          </select>\r\n        </div>\r\n      </div>\r\n      <div className=\"flex flex-col rounded-3xl border border-slate-100 bg-white p-6 shadow-sm\">\r\n        <div className=\"flex-1 space-y-4 overflow-y-auto pr-2\">\r\n          {chatMessages.length === 0 && (\r\n            <p className=\"text-center text-slate-500\">Start the conversation with IntelliWheels AI Assistant.</p>\r\n          )}\r\n          {chatMessages.map((msg) => (\r\n            <div\r\n              key={msg.id}\r\n              className={`max-w-3xl rounded-2xl p-4 ${msg.role === 'user' ? 'ml-auto bg-sky-100 text-slate-900' : 'bg-slate-50 text-slate-600'}`}\r\n            >\r\n              <p className=\"text-xs uppercase text-slate-400\">{msg.role === 'user' ? 'You' : 'Assistant'}</p>\r\n              <p className=\"mt-1 whitespace-pre-line text-sm\">{msg.text}</p>\r\n              {msg.listingData && (\r\n                <div className=\"mt-3 rounded-xl bg-white p-3 text-xs text-slate-500\">\r\n                  <p className=\"font-semibold text-slate-900\">Proposed Listing</p>\r\n                  {Object.entries(msg.listingData).map(([key, value]) =>\r\n                    value ? <p key={key}>{camelToTitle(key)}: {String(value)}</p> : null\r\n                  )}\r\n                </div>\r\n              )}\r\n            </div>\r\n          ))}\r\n        </div>\r\n        <div className=\"mt-4 space-y-3\">\r\n          {chatAttachment && (\r\n            <div className=\"flex items-center justify-between rounded-2xl bg-slate-50 p-3 text-sm text-slate-600\">\r\n              <span>Attached image</span>\r\n              <button onClick={() => setChatAttachment(null)} className=\"text-xs text-rose-500\">Remove</button>\r\n            </div>\r\n          )}\r\n          <textarea\r\n            name=\"chat-input\"\r\n            id=\"chat-input\"\r\n            value={chatInput}\r\n            onChange={(event) => setChatInput(event.target.value)}\r\n            placeholder=\"Ask about pricing, specs, or request a listing draft...\"\r\n            className=\"min-h-[120px] w-full rounded-3xl border border-slate-200 bg-slate-50 p-4 text-slate-900 placeholder-slate-500\"\r\n          />\r\n          <div className=\"flex flex-wrap items-center gap-3\">\r\n            <label className=\"cursor-pointer rounded-2xl border border-slate-200 px-4 py-2 text-sm font-semibold text-slate-900\">\r\n              Attach Image\r\n              <input\r\n                name=\"chat-attachment\"\r\n                id=\"chat-attachment\"\r\n                type=\"file\"\r\n                accept=\"image/*\"\r\n                className=\"hidden\"\r\n                onChange={async (event) => {\r\n                  const file = event.target.files?.[0];\r\n                  if (!file) return;\r\n                  const base64 = await fileToDataUrl(file);\r\n                  setChatAttachment({\r\n                    preview: URL.createObjectURL(file),\r\n                    base64,\r\n                    mime: file.type,\r\n                  });\r\n                }}\r\n              />\r\n            </label>\r\n            <button\r\n              className=\"flex-1 rounded-2xl bg-sky-600 py-3 text-center font-semibold text-white disabled:bg-sky-300\"\r\n              onClick={handleChatSubmit}\r\n              disabled={chatBusy}\r\n            >\r\n              {chatBusy ? 'Thinking...' : 'Send'}\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n\r\n  const renderAnalytics = () => {\r\n    if (!requireAuth()) return null;\r\n    if (!analyticsData) {\r\n      return <p className=\"text-slate-500\">No analytics available yet. Create listings or favorites to unlock insights.</p>;\r\n    }\r\n    return (\r\n      <div className=\"space-y-6\">\r\n        <div className=\"flex flex-wrap items-center gap-3\">\r\n          {['all', 'my', 'favorites'].map((filter) => (\r\n            <button\r\n              key={filter}\r\n              onClick={() => setAnalyticsFilter(filter as 'all' | 'my' | 'favorites')}\r\n              className={`rounded-2xl px-4 py-2 text-sm font-semibold ${analyticsFilter === filter ? 'bg-sky-600 text-white' : 'border border-slate-200 bg-white text-slate-600'\r\n                }`}\r\n            >\r\n              {camelToTitle(filter)}\r\n            </button>\r\n          ))}\r\n        </div>\r\n        {analyticsData.summary && (\r\n          <div className=\"grid gap-4 md:grid-cols-3\">\r\n            <StatCard label=\"Average Price\" value={formatPrice(analyticsData.summary.average_price, analyticsData.summary.currency)} />\r\n            <StatCard label=\"Cheapest\" value={formatPrice(analyticsData.summary.min_price, analyticsData.summary.currency)} />\r\n            <StatCard label=\"Most Expensive\" value={formatPrice(analyticsData.summary.max_price, analyticsData.summary.currency)} />\r\n          </div>\r\n        )}\r\n        {analyticsData.market_top_makes && (\r\n          <div className=\"rounded-3xl border border-slate-100 bg-white p-5 shadow-sm\">\r\n            <h3 className=\"text-lg font-semibold text-slate-900\">Top Makes</h3>\r\n            <div className=\"mt-4 space-y-3\">\r\n              {analyticsData.market_top_makes.map((entry) => (\r\n                <div key={entry.make} className=\"flex items-center justify-between rounded-2xl bg-slate-50 px-4 py-3 text-sm text-slate-600\">\r\n                  <span className=\"font-semibold text-slate-900\">{entry.make}</span>\r\n                  <span>{formatPrice(entry.avg_price, analyticsData.summary?.currency)}</span>\r\n                  <span>{entry.listings} listings</span>\r\n                </div>\r\n              ))}\r\n            </div>\r\n          </div>\r\n        )}\r\n      </div>\r\n    );\r\n  };\r\n\r\n  const renderContent = () => {\r\n    switch (activePage) {\r\n      case 'listings':\r\n        return (\r\n          <div className=\"space-y-6\">\r\n            <div className=\"grid gap-4 lg:grid-cols-[2fr,1fr]\">\r\n              <div className=\"rounded-3xl border border-slate-100 bg-white p-4 shadow-sm\">\r\n                <div className=\"grid gap-4 md:grid-cols-3\">\r\n                  <select value={filters.make} name=\"filter-make\" id=\"filter-make\" onChange={(event) => setFilters((prev) => ({ ...prev, make: event.target.value }))} className={inputFieldClass}>\r\n                    {makes.map((make) => (\r\n                      <option key={make} value={make}>{camelToTitle(make)}</option>\r\n                    ))}\r\n                  </select>\r\n                  <input\r\n                    name=\"filter-search\"\r\n                    id=\"filter-search\"\r\n                    value={filters.search}\r\n                    onChange={(event) => setFilters((prev) => ({ ...prev, search: event.target.value }))}\r\n                    placeholder=\"Search make, model, year\"\r\n                    className={inputFieldClass}\r\n                  />\r\n                  <select value={filters.sort} name=\"filter-sort\" id=\"filter-sort\" onChange={(event) => setFilters((prev) => ({ ...prev, sort: event.target.value as CarFilters['sort'] }))} className={inputFieldClass}>\r\n                    <option value=\"default\">Recommended</option>\r\n                    <option value=\"price-asc\">Price: Low â†’ High</option>\r\n                    <option value=\"price-desc\">Price: High â†’ Low</option>\r\n                    <option value=\"year-desc\">Newer first</option>\r\n                    <option value=\"rating-desc\">Top rated</option>\r\n                  </select>\r\n                </div>\r\n              </div>\r\n              <form onSubmit={handleSemanticSearch} className=\"rounded-3xl border border-slate-100 bg-white p-4 shadow-sm\">\r\n                <p className=\"text-sm font-semibold text-slate-900\">AI Semantic Search</p>\r\n                <div className=\"mt-3 flex gap-3\">\r\n                  <input\r\n                    name=\"semantic-query\"\r\n                    id=\"semantic-query\"\r\n                    value={semanticQuery}\r\n                    onChange={(event) => setSemanticQuery(event.target.value)}\r\n                    placeholder=\"e.g. Luxury hybrid SUV under 150k\"\r\n                    className={`flex-1 ${inputFieldClass}`}\r\n                  />\r\n                  <button className=\"rounded-2xl bg-sky-600 px-4 py-2 text-sm font-semibold text-white\">\r\n                    {semanticLoading ? 'Searching...' : 'Search'}\r\n                  </button>\r\n                </div>\r\n                {semanticResults.length > 0 && (\r\n                  <div className=\"mt-4 space-y-3\">\r\n                    {semanticResults.map((car) => (\r\n                      <div key={car.id} className=\"flex items-center gap-3 rounded-2xl border border-slate-100 bg-slate-50 p-3 text-sm text-slate-600\">\r\n                        <img src={getCarImage(car)} alt={car.model} className=\"h-14 w-20 rounded-xl object-cover\" />\r\n                        <div className=\"flex-1\">\r\n                          <div className=\"flex items-center justify-between\">\r\n                            <span className=\"font-semibold text-slate-900\">{car.make} {car.model}</span>\r\n                            <button className=\"text-xs text-sky-600\" onClick={() => handleOpenCarDetails(car.id)}>Inspect</button>\r\n                          </div>\r\n                          <p>{formatPrice(car.price, car.currency)}</p>\r\n                        </div>\r\n                      </div>\r\n                    ))}\r\n                  </div>\r\n                )}\r\n              </form>\r\n            </div>\r\n            <div className=\"grid gap-4 md:grid-cols-2 lg:grid-cols-3\">\r\n              {paginatedCars.length === 0 ? (\r\n                <p className=\"col-span-full text-center text-slate-500\">No listings match your filters yet.</p>\r\n              ) : (\r\n                paginatedCars.map((car) => renderCarCard(car))\r\n              )}\r\n            </div>\r\n            {sortedCars.length > 0 && (\r\n              <div className=\"flex flex-wrap items-center justify-between gap-4 rounded-3xl border border-slate-100 bg-white px-4 py-3 text-sm text-slate-600 shadow-sm\">\r\n                <p>\r\n                  Showing {Math.min((currentPage - 1) * LISTINGS_PER_PAGE + 1, sortedCars.length)}-\r\n                  {Math.min(currentPage * LISTINGS_PER_PAGE, sortedCars.length)} of {sortedCars.length} listings\r\n                </p>\r\n                {totalPages > 1 && (\r\n                  <div className=\"flex flex-wrap items-center gap-2\">\r\n                    <button\r\n                      type=\"button\"\r\n                      onClick={() => goToPage(currentPage - 1)}\r\n                      disabled={currentPage === 1}\r\n                      className=\"rounded-2xl border border-slate-200 px-3 py-1 font-semibold text-slate-700 disabled:cursor-not-allowed disabled:border-slate-100 disabled:text-slate-300\"\r\n                    >\r\n                      Prev\r\n                    </button>\r\n                    {paginationWindow[0] > 1 && (\r\n                      <>\r\n                        <button\r\n                          type=\"button\"\r\n                          onClick={() => goToPage(1)}\r\n                          className=\"rounded-2xl border border-slate-200 px-3 py-1 font-semibold text-slate-700\"\r\n                        >\r\n                          1\r\n                        </button>\r\n                        {paginationWindow[0] > 2 && <span className=\"text-slate-400\">â€¦</span>}\r\n                      </>\r\n                    )}\r\n                    {paginationWindow.map((page) => (\r\n                      <button\r\n                        key={page}\r\n                        type=\"button\"\r\n                        onClick={() => goToPage(page)}\r\n                        className={`rounded-2xl px-3 py-1 font-semibold ${currentPage === page ? 'bg-sky-600 text-white' : 'border border-slate-200 text-slate-700'\r\n                          }`}\r\n                      >\r\n                        {page}\r\n                      </button>\r\n                    ))}\r\n                    {paginationWindow[paginationWindow.length - 1] < totalPages && (\r\n                      <>\r\n                        {paginationWindow[paginationWindow.length - 1] < totalPages - 1 && (\r\n                          <span className=\"text-slate-400\">â€¦</span>\r\n                        )}\r\n                        <button\r\n                          type=\"button\"\r\n                          onClick={() => goToPage(totalPages)}\r\n                          className=\"rounded-2xl border border-slate-200 px-3 py-1 font-semibold text-slate-700\"\r\n                        >\r\n                          {totalPages}\r\n                        </button>\r\n                      </>\r\n                    )}\r\n                    <button\r\n                      type=\"button\"\r\n                      onClick={() => goToPage(currentPage + 1)}\r\n                      disabled={currentPage === totalPages}\r\n                      className=\"rounded-2xl border border-slate-200 px-3 py-1 font-semibold text-slate-700 disabled:cursor-not-allowed disabled:border-slate-100 disabled:text-slate-300\"\r\n                    >\r\n                      Next\r\n                    </button>\r\n                  </div>\r\n                )}\r\n              </div>\r\n            )}\r\n          </div>\r\n        );\r\n      case 'favorites':\r\n        return (\r\n          <div className=\"grid gap-4 md:grid-cols-2 lg:grid-cols-3\">\r\n            {cars.filter((car) => favorites.includes(car.id)).map((car) => renderCarCard(car))}\r\n            {favorites.length === 0 && <p className=\"text-slate-500\">No favorites yet.</p>}\r\n          </div>\r\n        );\r\n      case 'dealers':\r\n        if (!requireAuth()) return null;\r\n        return (\r\n          <div className=\"space-y-6\">\r\n            <div>\r\n              <h2 className=\"text-2xl font-bold text-slate-900\">{copy.dealersHeading}</h2>\r\n              <p className=\"text-sm text-slate-600\">{copy.dealersSubheading}</p>\r\n            </div>\r\n            {dealersLoading ? (\r\n              <p className=\"text-slate-500\">Loading dealers...</p>\r\n            ) : dealers.length ? (\r\n              <div className=\"grid gap-4 md:grid-cols-2 xl:grid-cols-3\">\r\n                {dealers.map((dealer) => renderDealerCard(dealer))}\r\n              </div>\r\n            ) : (\r\n              <p className=\"text-slate-500\">{copy.dealersEmpty}</p>\r\n            )}\r\n          </div>\r\n        );\r\n      case 'myListings':\r\n        if (!requireAuth()) return null;\r\n        return (\r\n          <div className=\"grid gap-4 md:grid-cols-2 lg:grid-cols-3\">\r\n            {myListings.map((car) => (\r\n              <div key={car.id} className=\"rounded-3xl border border-slate-100 bg-white p-4 shadow-sm\">\r\n                <div className=\"flex gap-3\">\r\n                  <img src={getCarImage(car)} alt={car.model} className=\"h-24 w-32 rounded-2xl object-cover\" />\r\n                  <div className=\"flex-1\">\r\n                    <h3 className=\"text-lg font-semibold text-slate-900\">{car.make} {car.model}</h3>\r\n                    <p className=\"text-sm text-slate-500\">{car.year}</p>\r\n                    <p className=\"text-xl font-bold text-emerald-600\">{formatPrice(car.price, car.currency)}</p>\r\n                    {car.odometerKm ? (\r\n                      <p className=\"text-xs text-slate-500\">{car.odometerKm.toLocaleString()} km</p>\r\n                    ) : null}\r\n                  </div>\r\n                </div>\r\n                <div className=\"mt-4 flex gap-3\">\r\n                  <button className=\"flex-1 rounded-2xl bg-slate-900/5 py-2 text-sm font-semibold text-slate-900\" onClick={() => handleOpenCarDetails(car.id)}>\r\n                    View\r\n                  </button>\r\n                  <button className=\"flex-1 rounded-2xl bg-rose-500 py-2 text-sm font-semibold text-white\" onClick={() => handleDeleteListing(car.id)}>\r\n                    Delete\r\n                  </button>\r\n                </div>\r\n              </div>\r\n            ))}\r\n            {myListings.length === 0 && <p className=\"text-slate-500\">No personal listings yet.</p>}\r\n          </div>\r\n        );\r\n      case 'addListing':\r\n        if (!requireAuth()) return null;\r\n        return (\r\n          <div className=\"grid gap-6 lg:grid-cols-[1.2fr,0.8fr]\">\r\n            <form className=\"space-y-4 rounded-3xl border border-slate-100 bg-white p-6 shadow-sm\" onSubmit={handleListingSubmit}>\r\n              <div className=\"grid gap-4 md:grid-cols-2\">\r\n                <select\r\n                  name=\"listing-make\"\r\n                  id=\"listing-make\"\r\n                  value={listingForm.make}\r\n                  onChange={(event) => handleMakeSelect(event.target.value)}\r\n                  className={inputFieldClass}\r\n                  required\r\n                >\r\n                  <option value=\"\">{copy.makeSelectLabel}</option>\r\n                  {availableMakeOptions.map((makeOption) => (\r\n                    <option key={makeOption} value={makeOption}>{makeOption}</option>\r\n                  ))}\r\n                </select>\r\n                <select\r\n                  name=\"listing-model\"\r\n                  id=\"listing-model\"\r\n                  value={listingForm.model}\r\n                  onChange={(event) => handleModelSelect(event.target.value)}\r\n                  className={inputFieldClass}\r\n                  required\r\n                  disabled={!listingForm.make}\r\n                >\r\n                  <option value=\"\">{copy.modelSelectLabel}</option>\r\n                  {availableModelOptions.map((model) => (\r\n                    <option key={model} value={model}>{model}</option>\r\n                  ))}\r\n                </select>\r\n                <input name=\"listing-year\" id=\"listing-year\" value={listingForm.year} onChange={(event) => handleListingInput('year', event.target.value)} placeholder=\"Year\" className={inputFieldClass} required />\r\n                <input name=\"listing-price\" id=\"listing-price\" value={listingForm.price} onChange={(event) => handleListingInput('price', event.target.value)} placeholder=\"Price\" className={inputFieldClass} required />\r\n                <select name=\"listing-currency\" id=\"listing-currency\" value={listingForm.currency} onChange={(event) => handleListingInput('currency', event.target.value)} className={inputFieldClass}>\r\n                  {CURRENCY_OPTIONS.map((currency) => (\r\n                    <option key={currency} value={currency}>{currency}</option>\r\n                  ))}\r\n                </select>\r\n                <input name=\"listing-bodystyle\" id=\"listing-bodystyle\" value={listingForm.bodyStyle} onChange={(event) => handleListingInput('bodyStyle', event.target.value)} placeholder=\"Body style\" className={inputFieldClass} />\r\n                <input name=\"listing-horsepower\" id=\"listing-horsepower\" value={listingForm.horsepower} onChange={(event) => handleListingInput('horsepower', event.target.value)} placeholder=\"Horsepower\" className={inputFieldClass} />\r\n                {availableEngineOptions.length > 0 ? (\r\n                  <select\r\n                    name=\"listing-engine\"\r\n                    id=\"listing-engine\"\r\n                    value={listingForm.engine}\r\n                    onChange={(event) => handleListingInput('engine', event.target.value)}\r\n                    className={inputFieldClass}\r\n                    disabled={!listingForm.model}\r\n                  >\r\n                    <option value=\"\">{copy.engineSelectLabel}</option>\r\n                    {availableEngineOptions.map((engine) => (\r\n                      <option key={engine} value={engine}>{engine}</option>\r\n                    ))}\r\n                  </select>\r\n                ) : (\r\n                  <input name=\"listing-engine\" id=\"listing-engine\" value={listingForm.engine} onChange={(event) => handleListingInput('engine', event.target.value)} placeholder={copy.engineSelectLabel} className={inputFieldClass} />\r\n                )}\r\n                <input name=\"listing-fueleconomy\" id=\"listing-fueleconomy\" value={listingForm.fuelEconomy} onChange={(event) => handleListingInput('fuelEconomy', event.target.value)} placeholder=\"Fuel economy\" className={inputFieldClass} />\r\n                <input\r\n                  name=\"listing-odometer\"\r\n                  id=\"listing-odometer\"\r\n                  value={listingForm.odometer}\r\n                  onChange={(event) => handleListingInput('odometer', event.target.value)}\r\n                  placeholder={copy.odometerLabel}\r\n                  className={inputFieldClass}\r\n                  type=\"number\"\r\n                  min=\"0\"\r\n                />\r\n                <input name=\"listing-image\" id=\"listing-image\" value={listingForm.image} onChange={(event) => handleListingInput('image', event.target.value)} placeholder=\"Image URL\" className={inputFieldClass} />\r\n              </div>\r\n              <textarea name=\"listing-description\" id=\"listing-description\" value={listingForm.description} onChange={(event) => handleListingInput('description', event.target.value)} placeholder=\"Description\" className={`h-32 w-full ${inputFieldClass}`}\r\n              />\r\n              <div className=\"flex flex-wrap gap-3\">\r\n                <button type=\"button\" className=\"rounded-2xl bg-sky-600 px-4 py-2 text-sm font-semibold text-white\" onClick={handlePriceAssist}>\r\n                  {copy.priceAssistLabel}\r\n                </button>\r\n                <label className=\"cursor-pointer rounded-2xl border border-dashed border-slate-300 px-4 py-2 text-sm font-semibold text-slate-900\">\r\n                  {copy.uploadPhotoLabel}\r\n                  <input type=\"file\" accept=\"image/*\" className=\"hidden\" onChange={(event) => {\r\n                    const file = event.target.files?.[0];\r\n                    if (file) handleUploadImage(file);\r\n                  }} />\r\n                </label>\r\n                <label className=\"cursor-pointer rounded-2xl border border-dashed border-slate-300 px-4 py-2 text-sm font-semibold text-slate-900\">\r\n                  {copy.visionHelperLabel}\r\n                  <input type=\"file\" accept=\"image/*\" className=\"hidden\" onChange={(event) => {\r\n                    const file = event.target.files?.[0];\r\n                    if (file) handleVisionAnalyze(file);\r\n                  }} />\r\n                </label>\r\n              </div>\r\n              <div className=\"space-y-3 rounded-2xl border border-slate-200 bg-slate-50 p-4\">\r\n                <div className=\"flex flex-wrap items-center justify-between gap-2\">\r\n                  <div>\r\n                    <p className=\"text-sm font-semibold text-slate-900\">{copy.galleryLabel}</p>\r\n                    <p className=\"text-xs text-slate-500\">{copy.galleryHint}</p>\r\n                  </div>\r\n                  <label className=\"cursor-pointer rounded-2xl border border-dashed border-slate-300 px-3 py-2 text-xs font-semibold text-slate-900\">\r\n                    {copy.galleryUploadLabel}\r\n                    <input\r\n                      type=\"file\"\r\n                      accept=\"image/*\"\r\n                    name=\"gallery-url\"\r\n                    id=\"gallery-url\"\r\n                      multiple\r\n                      className=\"hidden\"\r\n                      onChange={(event) => handleGalleryUpload(event.target.files)}\r\n                    />\r\n                  </label>\r\n                </div>\r\n                <div className=\"flex flex-wrap gap-2\">\r\n                  <input\r\n                    value={pendingGalleryUrl}\r\n                    onChange={(event) => setPendingGalleryUrl(event.target.value)}\r\n                    placeholder=\"Paste image URL\"\r\n                    className={`flex-1 ${inputFieldClass}`}\r\n                  />\r\n                  <button type=\"button\" className=\"rounded-2xl bg-slate-900/10 px-4 py-2 text-sm font-semibold text-slate-900\" onClick={handleAddGalleryUrl}>\r\n                    {copy.galleryAddButton}\r\n                  </button>\r\n                </div>\r\n                <div className=\"grid gap-3 sm:grid-cols-3\">\r\n                  {listingForm.galleryImages.length === 0 && (\r\n                    <p className=\"text-sm text-slate-500 sm:col-span-3\">{copy.galleryEmpty}</p>\r\n                  )}\r\n                  {listingForm.galleryImages.map((url, index) => (\r\n                    <div key={`${url}-${index}`} className=\"relative overflow-hidden rounded-2xl border border-slate-200 bg-white\">\r\n                    name=\"video-url\"\r\n                    id=\"video-url\"\r\n                      <img src={url} alt={`Gallery ${index + 1}`} className=\"h-32 w-full object-cover\" />\r\n                      <button type=\"button\" className=\"absolute right-2 top-2 rounded-full bg-white/90 px-2 py-1 text-xs font-semibold text-rose-500\" onClick={() => handleRemoveGalleryImage(index)}>\r\n                        {copy.galleryRemove}\r\n                      </button>\r\n                    </div>\r\n                  ))}\r\n                </div>\r\n                <div>\r\n                  <label className=\"text-xs uppercase tracking-wide text-slate-500\">{copy.videoLabel}</label>\r\n                  <input\r\n                    value={listingForm.videoUrl}\r\n                    onChange={(event) => handleListingInput('videoUrl', event.target.value)}\r\n                    placeholder=\"https://www.youtube.com/watch?v=...\"\r\n                    className={`mt-1 w-full ${inputFieldClass}`}\r\n                  />\r\n                </div>\r\n              </div>\r\n              {priceEstimate && (\r\n                <div className=\"rounded-2xl bg-emerald-50 p-4 text-sm text-emerald-900\">\r\n                  Suggested price {formatPrice(priceEstimate.value, priceEstimate.currency)}\r\n                  {priceEstimate.range && (\r\n                    <p className=\"text-emerald-700\">\r\n                      Range {formatPrice(priceEstimate.range.low, priceEstimate.currency)} â†’ {formatPrice(priceEstimate.range.high, priceEstimate.currency)}\r\n                    </p>\r\n                  )}\r\n                </div>\r\n              )}\r\n              {visionSuggestion && (\r\n                <div className=\"rounded-2xl border border-slate-100 bg-slate-50 p-4 text-sm text-slate-600\">\r\n                  <p className=\"font-semibold text-slate-900\">Vision insights</p>\r\n                  {visionSuggestion.highlights?.map((highlight, index) => (\r\n                    <p key={index}>â€¢ {highlight}</p>\r\n                  ))}\r\n                </div>\r\n              )}\r\n              <button className=\"w-full rounded-2xl bg-emerald-600 py-3 text-lg font-semibold text-white\" disabled={isSubmittingListing}>\r\n                {isSubmittingListing ? 'Publishing...' : 'Publish Listing'}\r\n              </button>\r\n            </form>\r\n            <div className=\"space-y-4 rounded-3xl border border-slate-100 bg-white p-6 shadow-sm\">\r\n              <h3 className=\"text-xl font-semibold text-slate-900\">Vision Helper Tips</h3>\r\n              <p className=\"text-sm text-slate-600\">Upload clear daylight shots. The AI will detect make, model, color, and condition to pre-fill your listing.</p>\r\n              {visionLoading && <p className=\"text-slate-500\">Analyzing image...</p>}\r\n            </div>\r\n          </div>\r\n        );\r\n      case 'profile':\r\n        return renderProfilePanel();\r\n      case 'chatbot':\r\n        return renderChatbot();\r\n\r\n      case 'analytics':\r\n        return renderAnalytics();\r\n      default:\r\n        return null;\r\n    }\r\n  };\r\n\r\n  const currentServiceLabel = copy[currentService.labelKey];\r\n  const currentServiceDescription = copy[currentService.descriptionKey];\r\n  const currentYear = new Date().getFullYear();\r\n\r\n  return (\r\n    <div className={`${backgroundClass} min-h-screen`} dir={direction}>\r\n      {renderToast()}\r\n      <header className={`sticky top-0 z-50 border-b backdrop-blur-md transition-colors duration-300 ${headerSurfaceClass} ${subtleBorderClass}`}>\r\n        <div className=\"mx-auto flex h-20 max-w-7xl items-center justify-between px-4 sm:px-6 lg:px-8\">\r\n          <div className=\"flex items-center gap-8\">\r\n            {/* Logo */}\r\n            <div\r\n              className=\"group flex cursor-pointer items-center gap-3\"\r\n              onClick={() => setActivePage('listings')}\r\n            >\r\n              <img\r\n                src=\"/intellliwheels_logo_concept_dynamic.png\"\r\n                alt=\"IntelliWheels\"\r\n                className=\"h-16 w-auto object-contain transition-transform group-hover:scale-105\"\r\n              />\r\n            </div>\r\n\r\n            {/* Desktop Nav */}\r\n            <nav className=\"hidden items-center gap-1 md:flex\">\r\n              {[\r\n                { key: 'listings', label: copy.navCatalog },\r\n                { key: 'dealers', label: copy.navDealers },\r\n                { key: 'addListing', label: copy.navAddListing },\r\n                { key: 'chatbot', label: copy.navChatbot },\r\n                { key: 'analytics', label: copy.navAnalytics },\r\n              ].map((item) => (\r\n                <button\r\n                  key={item.key}\r\n                  onClick={() => setActivePage(item.key as PageKey)}\r\n                  className={`rounded-xl px-4 py-2 text-sm font-semibold transition-all ${activePage === item.key\r\n                    ? 'bg-slate-100/10 text-indigo-500 shadow-sm ring-1 ring-inset ring-slate-200/10 dark:text-indigo-400'\r\n                    : `text-slate-500 hover:bg-slate-100/5 hover:text-slate-900 dark:text-slate-400 dark:hover:text-slate-200`\r\n                    }`}\r\n                >\r\n                  {item.label}\r\n                </button>\r\n              ))}\r\n            </nav>\r\n          </div>\r\n\r\n          {/* Right Actions */}\r\n          <div className=\"flex items-center gap-4\">\r\n            <div className={`hidden h-8 w-px md:block ${resolvedTheme === 'dark' ? 'bg-slate-800' : 'bg-slate-200'}`} />\r\n\r\n            <div className=\"flex items-center gap-2\">\r\n              {/* Search Trigger (Visual Only for now) */}\r\n              <button className={`hidden rounded-full p-2 text-slate-500 transition hover:bg-slate-100 dark:hover:bg-slate-800 sm:block`}>\r\n                <svg className=\"h-5 w-5\" fill=\"none\" viewBox=\"0 0 24 24\" strokeWidth=\"2\" stroke=\"currentColor\">\r\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607Z\" />\r\n                </svg>\r\n              </button>\r\n\r\n              {/* Settings Toggle */}\r\n              <div className=\"relative\" ref={settingsMenuRef}>\r\n                <button\r\n                  onClick={() => setSettingsOpen(!settingsOpen)}\r\n                  className={`flex items-center gap-2 rounded-full border p-1 pr-4 transition-all hover:shadow-md ${statusPillClass}`}\r\n                >\r\n                  <div className=\"flex h-8 w-8 items-center justify-center rounded-full bg-slate-900 text-xs font-bold text-white dark:bg-white dark:text-slate-900\">\r\n                    {user?.username?.[0]?.toUpperCase() || 'G'}\r\n                  </div>\r\n                  <span className=\"text-xs font-bold\">{user ? user.username : copy.statusGuest}</span>\r\n                  <span className=\"text-xs opacity-50\">â–¼</span>\r\n                </button>\r\n\r\n                {settingsOpen && (\r\n                  <div className={`absolute right-0 top-full mt-4 w-72 origin-top-right overflow-hidden rounded-3xl border border-slate-100 bg-white shadow-2xl ring-1 ring-black/5 dark:border-slate-800 dark:bg-slate-900`}>\r\n                    <div className=\"bg-slate-50 px-6 py-4 dark:bg-slate-800/50\">\r\n                      <p className=\"text-xs font-bold uppercase tracking-wider text-slate-500\">{copy.settingsTitle}</p>\r\n                      <p className=\"text-sm text-slate-400\">{copy.settingsSubtitle}</p>\r\n                    </div>\r\n                    <div className=\"p-2\">\r\n                      <button\r\n                        onClick={() => { setActivePage('profile'); setSettingsOpen(false); }}\r\n                        className=\"flex w-full items-center gap-3 rounded-2xl p-3 text-left hover:bg-slate-50 dark:hover:bg-slate-800\"\r\n                      >\r\n                        <span className=\"flex h-10 w-10 items-center justify-center rounded-full bg-indigo-50 text-xl dark:bg-indigo-900/30\">ğŸ‘¤</span>\r\n                        <div>\r\n                          <p className={`font-semibold text-sm ${resolvedTheme === 'dark' ? 'text-slate-200' : 'text-slate-900'}`}>{user ? copy.settingsProfileCta : copy.settingsProfileGuest}</p>\r\n                          <p className=\"text-xs text-slate-500\">{user?.email || 'Manage account'}</p>\r\n                        </div>\r\n                      </button>\r\n                      <div className=\"my-2 h-px bg-slate-100 dark:bg-slate-800\" />\r\n                      <div className=\"my-2 h-px bg-slate-100 dark:bg-slate-800\" />\r\n                      <div className=\"space-y-4 px-3 py-2\">\r\n                        {/* Language Selector */}\r\n                        <div>\r\n                          <label className=\"mb-1 block text-xs font-bold text-slate-500\">{copy.settingsLanguage}</label>\r\n                          <div className=\"grid grid-cols-2 gap-2\">\r\n                            {LANGUAGE_OPTIONS.map((opt) => (\r\n                              <button\r\n                                key={opt.value}\r\n                                onClick={() => setLanguage(opt.value)}\r\n                                className={`rounded-lg py-1.5 text-xs font-semibold transition ${language === opt.value\r\n                                  ? 'bg-slate-900 text-white dark:bg-white dark:text-slate-900'\r\n                                  : 'bg-slate-100 text-slate-600 hover:bg-slate-200 dark:bg-slate-800 dark:text-slate-400'\r\n                                  }`}\r\n                              >\r\n                                {opt.label}\r\n                              </button>\r\n                            ))}\r\n                          </div>\r\n                        </div>\r\n\r\n                        {/* Currency Selector */}\r\n                        <div>\r\n                          <label className=\"mb-1 block text-xs font-bold text-slate-500\">{copy.settingsCurrency}</label>\r\n                          <select\r\n                            value={currency}\r\n                            onChange={(e) => setCurrency(e.target.value as CurrencyCode)}\r\n                            className=\"w-full appearance-none rounded-xl border-slate-200 bg-slate-50 px-3 py-2 text-xs font-semibold text-slate-700 outline-none focus:ring-2 focus:ring-indigo-500 dark:border-slate-700 dark:bg-slate-800 dark:text-slate-300\"\r\n                          >\r\n                            {CURRENCY_OPTIONS.map((code) => (\r\n                              <option key={code} value={code}>{code}</option>\r\n                            ))}\r\n                          </select>\r\n                        </div>\r\n\r\n                        {/* Theme Selector */}\r\n                        <div>\r\n                          <p className=\"mb-1 text-xs font-bold text-slate-500\">{copy.themeLabel}</p>\r\n                          <div className=\"grid grid-cols-3 gap-2\">\r\n                            {THEME_OPTIONS.map((opt) => (\r\n                              <button\r\n                                key={opt.value}\r\n                                onClick={() => setTheme(opt.value)}\r\n                                className={`rounded-lg py-2 text-xs font-semibold transition ${theme === opt.value\r\n                                  ? 'bg-indigo-600 text-white shadow-lg shadow-indigo-500/30'\r\n                                  : 'bg-slate-100 text-slate-600 hover:bg-slate-200 dark:bg-slate-800 dark:text-slate-400'\r\n                                  }`}\r\n                              >\r\n                                {copy[opt.labelKey]}\r\n                              </button>\r\n                            ))}\r\n                          </div>\r\n                        </div>\r\n                        <div className=\"mt-2\">\r\n                          {!user ? (\r\n                            <div className=\"grid grid-cols-2 gap-2 p-1\">\r\n                              <button onClick={() => { setActivePage('profile'); setSettingsOpen(false); }} className=\"rounded-xl border border-slate-200 py-2.5 text-sm font-bold text-slate-700 hover:bg-slate-50\">Sign In</button>\r\n                              <button onClick={() => { setActivePage('profile'); setSettingsOpen(false); }} className=\"rounded-xl bg-slate-900 py-2.5 text-sm font-bold text-white hover:bg-slate-800\">Sign Up</button>\r\n                            </div>\r\n                          ) : (\r\n                            <button onClick={() => { logout(); setSettingsOpen(false); }} className=\"w-full rounded-xl border border-slate-200 py-2.5 text-center text-sm font-bold text-rose-600 hover:bg-rose-50 dark:border-slate-700 dark:hover:bg-rose-900/20\">Sign Out</button>\r\n                          )}\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                )}\r\n              </div>\r\n\r\n              {/* Mobile Menu Toggle */}\r\n              <button\r\n                className=\"flex h-10 w-10 items-center justify-center rounded-full border border-slate-200 text-slate-600 md:hidden dark:border-slate-700 dark:text-slate-300\"\r\n                onClick={() => setNavMenuOpen(!navMenuOpen)}\r\n              >\r\n                â˜°\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Mobile Nav Drawer */}\r\n        {navMenuOpen && (\r\n          <div className=\"border-t border-slate-100 bg-white/95 px-4 py-4 backdrop-blur-xl dark:border-slate-800 dark:bg-slate-900/95 md:hidden\">\r\n            <div className=\"space-y-1\">\r\n              {[\r\n                { key: 'listings', label: copy.navCatalog },\r\n                { key: 'dealers', label: copy.navDealers },\r\n                { key: 'chatbot', label: copy.navChatbot },\r\n                { key: 'analytics', label: copy.navAnalytics },\r\n                { key: 'profile', label: copy.navProfile },\r\n              ].map((item) => (\r\n                <button\r\n                  key={item.key}\r\n                  onClick={() => { setActivePage(item.key as PageKey); setNavMenuOpen(false); }}\r\n                  className={`block w-full rounded-xl px-4 py-3 text-left font-semibold ${activePage === item.key ? 'bg-indigo-50 text-indigo-600 dark:bg-indigo-900/20 dark:text-indigo-400' : 'text-slate-600 hover:bg-slate-50 dark:text-slate-300'\r\n                    }`}\r\n                >\r\n                  {item.label}\r\n                </button>\r\n              ))}\r\n            </div>\r\n          </div>\r\n        )}\r\n      </header>\r\n      <div className=\"mx-auto max-w-7xl space-y-8 px-4 py-10\">\r\n        <main className={`rounded-3xl ${mainSurfaceClass} p-6 shadow-lg`}>\r\n          {authLoading ? <p className=\"text-center text-slate-500\">Loading account...</p> : renderContent()}\r\n        </main>\r\n      </div>\r\n      <footer className={`${headerSurfaceClass} border-t ${subtleBorderClass}`}>\r\n        <div className=\"mx-auto max-w-7xl px-4 py-8\">\r\n          <div className=\"flex flex-wrap items-start justify-between gap-6 text-sm\">\r\n            <div>\r\n              <p className=\"text-lg font-semibold\">IntelliWheels</p>\r\n              <p className={`text-sm ${headerSubtleText}`}>{copy.tagline}</p>\r\n            </div>\r\n            <div>\r\n              <p className=\"font-semibold\">{copy.footerSupport}</p>\r\n              <p className={`text-sm ${headerSubtleText}`}>{copy.footerEmail}: support@intelliwheels.ai</p>\r\n              <p className={`text-sm ${headerSubtleText}`}>{copy.footerPhone}: +971 55 501 0101</p>\r\n            </div>\r\n            <div>\r\n              <p className=\"font-semibold\">{copy.footerContact}</p>\r\n              <p className={`text-sm ${headerSubtleText}`}>Suite 14, Dubai Design District</p>\r\n              <p className={`text-sm ${headerSubtleText}`}>hello@intelliwheels.ai</p>\r\n            </div>\r\n            <div>\r\n              <p className=\"font-semibold\">{copy.footerSocial}</p>\r\n              <div className=\"flex flex-col gap-1 text-sky-600\">\r\n                <a href=\"https://www.instagram.com/intelliwheels\" target=\"_blank\" rel=\"noreferrer\">{copy.footerInstagram}</a>\r\n                <a href=\"https://x.com/IntelliWheels\" target=\"_blank\" rel=\"noreferrer\">X / Twitter</a>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <p className={`mt-6 text-xs ${headerMuted}`}>Â© {currentYear} IntelliWheels. {copy.footerRights}</p>\r\n        </div>\r\n      </footer>\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction StatCard({ label, value }: { label: string; value: string }) {\r\n  return (\r\n    <div className=\"rounded-3xl border border-slate-100 bg-gradient-to-br from-white to-slate-50 p-5 text-slate-900 shadow-sm\">\r\n      <p className=\"text-xs uppercase text-slate-400\">{label}</p>\r\n      <p className=\"mt-2 text-2xl font-semibold\">{value}</p>\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction convertCurrency(value?: number, fromCurrency: CurrencyCode = 'AED', toCurrency: CurrencyCode = 'AED') {\r\n  if (value === undefined || value === null) return null;\r\n  if (fromCurrency === toCurrency) return value;\r\n\r\n  // Convert from source to JOD (Base) first\r\n  // Rates are defined as \"How many JOD is 1 Unit of Source\" ? NO\r\n  // Let's assume rates in CURRENCY_RATES are \"Value of 1 [Key] in JOD\"\r\n  // Wait, previous rates were based on AED. \r\n  // Old: USD: 3.6725 (1 USD = 3.67 AED).\r\n  // New Base: JOD.\r\n  // Rate logic: 1 JOD = X Currency? OR 1 Currency = X JOD?\r\n  // Let's stick to: 1 [Key] = [Value] Base Currency (JOD).\r\n  // So if Base is JOD:\r\n  // USD = 0.709 (1 USD is 0.709 JOD)\r\n  // AED = 0.19  (1 AED is 0.19 JOD)\r\n\r\n  const fromRate = CURRENCY_RATES[fromCurrency as keyof typeof CURRENCY_RATES] ?? 1; // Value of 1 FromUnit in JOD\r\n  const toRate = CURRENCY_RATES[toCurrency as keyof typeof CURRENCY_RATES] ?? 1;     // Value of 1 ToUnit in JOD\r\n\r\n  // Convert Source to Base (JOD)\r\n  // Value * Rate = Value in JOD\r\n  const valueInBase = value * fromRate;\r\n\r\n  // Convert Base to Target\r\n  // ValueInBase / ToRate = Value in Target\r\n  const converted = valueInBase / toRate;\r\n\r\n  return converted;\r\n}\r\n\r\nfunction formatCurrency(value?: number, currency = 'AED') {\r\n  if (!value && value !== 0) return 'TBD';\r\n  try {\r\n    return new Intl.NumberFormat('en-US', {\r\n      style: 'currency',\r\n      currency,\r\n      maximumFractionDigits: 0,\r\n    }).format(value);\r\n  } catch (err) {\r\n    return `${value?.toLocaleString() ?? 'TBD'} ${currency}`;\r\n  }\r\n}\r\n\r\nfunction camelToTitle(value: string) {\r\n  return value\r\n    .replace(/([A-Z])/g, ' $1')\r\n    .replace(/_/g, ' ')\r\n    .replace(/^./, (str) => str.toUpperCase());\r\n}\r\n\r\nfunction fileToDataUrl(file: File) {\r\n  return new Promise<string>((resolve, reject) => {\r\n    const reader = new FileReader();\r\n    reader.onload = () => resolve(String(reader.result));\r\n    reader.onerror = reject;\r\n    reader.readAsDataURL(file);\r\n  });\r\n}\r\n","import { MOCK_CARS } from './mockData';\r\n\r\ninterface CatalogModel {\r\n  name: string;\r\n  engines: Set<string>;\r\n}\r\n\r\ninterface CatalogMake {\r\n  name: string;\r\n  models: Record<string, CatalogModel>;\r\n}\r\n\r\nconst catalogIndex: Record<string, CatalogMake> = buildCatalogIndex();\r\n\r\nfunction buildCatalogIndex() {\r\n  const index: Record<string, CatalogMake> = {};\r\n  for (const car of MOCK_CARS) {\r\n    const makeName = car.make?.trim();\r\n    const modelName = car.model?.trim();\r\n    if (!makeName || !modelName) continue;\r\n    const makeKey = makeName.toLowerCase();\r\n    if (!index[makeKey]) {\r\n      index[makeKey] = { name: makeName, models: {} };\r\n    }\r\n    const modelKey = modelName.toLowerCase();\r\n    if (!index[makeKey].models[modelKey]) {\r\n      index[makeKey].models[modelKey] = { name: modelName, engines: new Set() };\r\n    }\r\n    const engineName = car.specs?.engine || (car.specs as Record<string, unknown> | undefined)?.['Engine'] || null;\r\n    if (engineName) {\r\n      index[makeKey].models[modelKey].engines.add(String(engineName));\r\n    }\r\n  }\r\n  return index;\r\n}\r\n\r\nexport function getCatalogMakes() {\r\n  return Object.values(catalogIndex)\r\n    .map((entry) => entry.name)\r\n    .sort((a, b) => a.localeCompare(b));\r\n}\r\n\r\nexport function getCatalogModels(make: string) {\r\n  if (!make) return [];\r\n  const makeEntry = catalogIndex[make.toLowerCase()];\r\n  if (!makeEntry) return [];\r\n  return Object.values(makeEntry.models)\r\n    .map((entry) => entry.name)\r\n    .sort((a, b) => a.localeCompare(b));\r\n}\r\n\r\nexport function getCatalogEngines(make: string, model: string) {\r\n  if (!make || !model) return [];\r\n  const makeEntry = catalogIndex[make.toLowerCase()];\r\n  if (!makeEntry) return [];\r\n  const modelEntry = makeEntry.models[model.toLowerCase()];\r\n  if (!modelEntry) return [];\r\n  return Array.from(modelEntry.engines.values()).sort((a, b) => a.localeCompare(b));\r\n}\r\n","'use client';\n\nimport { AppView } from '@/components/AppView';\nimport { AuthProvider } from '@/context/AuthContext';\n\nexport default function Home() {\n  return (\n    <AuthProvider>\n      <AppView />\n    </AuthProvider>\n  );\n}\n"],"names":[],"mappings":"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"}